/*! puredom light 18-02-2014 */
"function"!=typeof Date.now&&(Date.now=function(){return(new Date).getTime()}),function(){function a(a){var b=a,d=m[a];return d?d:(c&&a.substring(0,c.length)!==c&&(d=c+a.charAt(0).toUpperCase()+a.substring(1),d in document.body.style&&(b=d)),m[a]=b,b)}var b,c,d,e,f=window.puredom,g=function(){return k.puredom.apply(k,arguments)},h={version:"1.2.1",templateAttributeName:"data-tpl-id",baseAnimationInterval:20,allowCssTransitions:!0,easingMethods:{ease:function(a){return(Math.sin(a*Math.PI-Math.PI/2)+1)/2},"ease-in-out":function(a){return(Math.sin(a*Math.PI-Math.PI/2)+1)/2},"ease-in-out-2":function(a){return this["ease-in-out"](this["ease-in-out"](a))},"ease-in-out-3":function(a){return this["ease-in-out"](this["ease-in-out"](this["ease-in-out"](a)))}}},i=!1,j=h.constructor,k={oninit:[],animationTimes:{fast:150,medium:450,slow:1e3},animationTimeScale:1,registeredEventCount:0,html5elements:"abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video".split(" "),support:{html5:!0,querySelectorAll:!!("querySelectorAll"in document),filters:!1,webkitMultitouch:!!("createTouch"in document)},regex:{css3AutoPrefix:/([\s\;\/\*])(transform|transition|perspective|box\-sizing|box\-shadow|border\-radius)\:([^\;]*)(\;|$)/gim,css3VendorPrefix:/\b\-(moz|webkit|ms|o|vendor)\-/gim,templateFieldToken:/([^\\]?)\{([a-z0-9A-Z\$_\.]+)(\|[^\}]*?)?\}/gm,parseObjectNameFromString:/^\[object ([^\s]+)\]$/gim,autoDetectHTMLContent:/(<[a-z]|&[a-z#0-9]{1,10};)/gim,whitespaceCharacters:/\s/,getNumericCSSValue:/[^0-9\.\-]/gm,getCSSValueUnits:/([a-z]+|%)$/,getNonIntegerCharsSigned:/[^0-9\.\-]/gm,getUpperCaseAlphaChars:/[A-Z]/gm},noop:function(){}};if(navigator.userAgent.match(/\b(webkit|applewebkit|chrome|chromium|khtml)\b/gim)?(b="-webkit",c="Webkit"):navigator.userAgent.match(/\bopera\b/gim)?(b="-o",c="O"):navigator.userAgent.match(/\bgecko\b/gim)?(b="-moz",c="Moz"):navigator.userAgent.match(/\bmsie\s*?(8|9|[1-9][0-9]+)\b/gim)?(b="-ms",c="Ms"):navigator.userAgent.match(/\bmsie\s*?[4-8]\b/gim)&&(k.support.filters=!0,k.support.filterProperty="filter"),function(a,b){if(a=document.createElement("div"),a.innerHTML="<nav></nav>",k.support.html5=a.childNodes.length>0,!k.support.html5){for(k.html5frag=document.createDocumentFragment(),b=k.html5elements.length;b--;)k.html5frag.createElement(k.html5elements[b]);k.html5div=document.createElement("div"),k.html5frag.appendChild(k.html5div)}}(),e=function(){var a=document.body;return d=void 0!==a.textContent&&"textContent"||a.innerText&&"innerText"||"innerHTML",e=null,d},g.extend=function(a){var b,c,d;for(a=a||{},b=1;b<arguments.length;b++)if(d=arguments[b]){for(c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);"function"==typeof d.toString&&d.toString!==Object.prototype.toString&&(a.toString=d.toString)}return a},g.mixin=function(a){var b,c,d;for(a=a||{},b=1;b<arguments.length;b++)if(d=arguments[b])for(c in d)d.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=d[c]);return a},g.strip=function(a,b){for(var c in a)(b===!0||a.hasOwnProperty(c))&&(a[c]=null)},g.delve=function(a,b,c,d){var e=0;for(b=b.split("."),c===!0&&b.splice(0,1);e<b.length&&a&&a.hasOwnProperty(b[e]);)a=a[b[e]],e+=1;return e>=b.length||d===!0&&e>0?a:void 0},g.flattenObj=function(a,b,c,d){var e,f;b=b||"",c=c||0,d=d||{};for(e in a)a.hasOwnProperty(e)&&(f=b?b+"_"+e:e,g.isScalar(a[e])?d[f]=a[e]:g.flattenObj(a[e],f,c+1,d));return c?void 0:d},g.template=function(a,b,c){var d,e;return c!==!1&&g.i18n&&(e=g.i18n),d=(a+"").replace(k.regex.templateFieldToken,function(a,c,d,f){var h;return"\\"!==c&&d?(h=g.delve(b,d),h?(e&&(h=e(h)||h),f&&"|"===f.substring(0,1)&&(h=g.text.filter(h,f.substring(1))),a=c+h):a=c):a=c,a})},g.inherits=function(a,b){function c(){}c.prototype=b.prototype;var d=a.prototype;a.prototype=new c,puredom.extend(a.prototype,d),a.prototype.constructor=a,a.prototype.__super=b},g.typeOf=function(a){if(void 0===a)return"undefined";if(null===a)return"null";if(a){if(a.constructor===j)return"object";if(g.isArray(a))return"array"}return Object.prototype.toString.call(a).replace(k.regex.parseObjectNameFromString,"$1").toLowerCase()},g.isScalar=function(a){var b=g.typeOf(a);return"undefined"===b||"null"===b||"number"===b||"string"===b||"boolean"===b?!0:!1},!Array.prototype.indexOf||0!==[g].indexOf(g))try{Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}}catch(l){}g.toArray=function(a){var b,c=[],d=a&&a.length;if(d||0===d)for(b=d;b--;)c[b]=a[b];else for(b=0;;){if(a.hasOwnProperty&&a.hasOwnProperty(b))c.push(a[b]);else{if(!a.hasOwnProperty||!a.hasOwnProperty(b+""))break;c.push(a[b+""])}b+=1}return c},g.isArray=Array.isArray?function(a){return Array.isArray(a)}:function(a){return"[object Array]"===Object.prototype.toString.call(a)},g.hasOwnProp=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},g.forEach=function(a,b){var c,d;if(g.isArray(a))for(c=0;c<a.length&&(d=b(a[c],c),d!==!1);c++);else for(c in a)if(a.hasOwnProperty(c)&&(d=b(a[c],c),d===!1))break;return a},g.foreach=g.forEach,g.setInnerHTML=function(a,b){var c,d;if(k.support.html5)a.innerHTML=b||"";else{for(a.innerHTML="",k.html5div.innerHTML=b||"",c=document.createDocumentFragment(),d=k.html5div.childNodes.length;d--;)c.appendChild(k.html5div.firstChild);a.appendChild(c)}},g.createElement=function(a,c){var d,e,f,h,i;if("string"==typeof a){for(h=document.createElement("div"),h.innerHTML=a,f=0;f<h.childNodes.length;f++)d=h.childNodes[f],1===d.nodeType&&c&&c.appendChild(d);return d}a=a||{},d=document.createElement(a.type||"div"),c=c||a.parent,a.insertBefore&&a.insertBefore.constructor===g.NodeSelection&&(a.insertBefore=a.insertBefore._nodes[0]),!c&&a.insertBefore&&(c=a.insertBefore.parentNode);for(e in a)if(g.hasOwnProp(a,e))if("on"===(e+"").substring(0,2).toLowerCase())g.addEvent(d,e.substring(2),a[e]);else if("css"===e||"cssText"===e)b?(a[e]=a[e].replace(k.regex.css3AutoPrefix,"$1"+b+"-$2:$3; $2:$3;"),a[e]=a[e].replace(k.regex.css3VendorPrefix,"-"+b+"-"),d.style.cssText=a[e]):d.style.cssText=a[e];else if("html"===e||"innerHTML"===e)g.setInnerHTML(d,a[e]);else if("attributes"===e)for(f in a[e])g.hasOwnProp(a[e],f)&&d.setAttribute(f,a[e][f]);else if("parent"!==e&&"children"!==e&&"insertBefore"!==e&&"type"!==e&&"children"!==e&&"html"!==e&&"innerHTML"!==e)if(document.all)try{d[e]=a[e]}catch(j){g.log(e)}else d[e]=a[e];if(c){if(a.insertBefore)try{c.insertBefore(d,a.insertBefore),i=!0}catch(j){i=!1}i||c.appendChild(d)}if(a.children&&g.isArray(a.children)){for(h=document.createDocumentFragment(),e=0;e<a.children.length;e++)g.createElement(a.children[e],h);d.appendChild(h)}return d},g.NodeSelection=function n(a){var b;if(this._results=[],this._animations=[],a)if(g.isArray(a))for(this._nodes=a=a.slice(),b=a.length;b--;)a[b]?a[b]instanceof n&&(a=a.concat(a.splice(b,1)[0]._nodes)):a.splice(b,1);else this._nodes=[a];else this._nodes=[]},g.extend(g.NodeSelection.prototype,{_results:[],_nodes:[],_animations:[],describe:function(){var a=[];return this.each(function(b){var c="<"+b.nodeName(),d=b.prop("id"),e=b.prop("className");d&&(c+=' id="'+d+'"'),e&&(c+=' class="'+e+'"'),c+=">",c+=1===b._nodes[0].childNodes.length&&3===b._nodes[0].childNodes[0].nodeType?b.text().replace(/(\r|\n)/gim,decodeURIComponent("%E2%86%A9")).replace(/\t/gim,decodeURIComponent("%E2%86%92")):"["+b.children().count()+" children]",c+="</"+b.nodeName()+">",a.push(c)}),a},toString:function(){return this.describe().join(", ")},toSource:function(){return this._nodes},getResult:function(a){return a=Math.round(a)||0,this._results[this._results.length-a-1]},pushResult:function(a){return this._results.push(a),this},each:function(a){return this._each(a,!0)},_each:function(a,b,c){var d,e,f,h,i=this._nodes.slice(0,this._nodes.length);for(d=0;d<i.length&&(e=d,c===!0&&(e=i.length-e-1),f=i[e],b===!0&&(f=new g.NodeSelection(f)),h=a.call(this,f,e),h!==!1);d++);return this},wait:function(a,b){var c=this;return b&&setTimeout(function(){b.apply(c),c=b=null},Math.abs(a)),this},nodeName:function(){var a=this._nodes[0],b=a&&a.nodeName&&a.nodeName.toLowerCase();return a===window?"#window":b?b:null},uuid:function(){return this._nodes[0]&&k.nodeToId(this._nodes[0])||null},text:function(a){return 0===arguments.length?this._nodes[0]&&this._nodes[0][d||e()]||"":(a+="",this._each(function(b){b[d||e()]=a}),this)},html:function(a,b){return 0===arguments.length?this._nodes[0]&&this._nodes[0].innerHTML||"":(a+="",k.regex.autoDetectHTMLContent.lastIndex=0,k.regex.autoDetectHTMLContent.test(a)&&b!==!0?this._each(function(b){g.setInnerHTML(b,a)}):this._each(function(b){b[d||e()]=a}),this)},css:function(a,b,c){var d,e=this;if(b=b||{},("string"==typeof b||"number"==typeof b)&&(b={tween:b}),!c&&b.callback&&(c=b.callback),c&&c.call||(c=k.noop),d=g.typeOf(b.tween),"string"==typeof a&&(a=k.parseCSS(a)),"string"===d&&"none"!==b.tween||"number"===d&&b.tween>0){var f,h,i=(b.tween+"").replace(k.regex.whitespaceCharacters,"").split(","),j=0,l=0;h=function(a){l+=1,l>=j&&(h=null,c&&c.call(e,e),e=c=a=null)};for(f in a)a.hasOwnProperty(f)&&(j+=1,this.animateCss(f,a[f],i[0],i[1],h))}else this._each(function(b){g.applyCss(b,a)}),c?setTimeout(function(){c.call(e,e),e=c=null},1):e=null;return this},show:function(){return this.css({display:"",visibility:"visible"}),this._each(function(a){("none"===a.style.display||"none"===g.nodeStyle(a,"display"))&&(a.style.display="block")}),this},hide:function(a){return this.css(a===!1?{visibility:"hidden"}:{display:"none"})},fadeIn:function(a,b){var c=parseFloat(this.getStyle("opacity")||"0")||0,d=1;return("none"===this.getStyle("display")||"hidden"===this.getStyle("visibility"))&&(this.getStyle("opacity")&&c>0&&1>c&&(d=c),c=0,this.css({opacity:0})),"function"===g.typeOf(a)&&(b=a,a=arguments[1]),c>=1||0===a||a===!1?(this.css({opacity:d}).show(),b&&b.call&&setTimeout(b,0),this):(this.css({opacity:d},{tween:a||"medium",callback:function(c){b&&b(c),a=b=null}}).show(),this)},fadeOut:function(a,b,c){var d=parseFloat(this.getStyle("opacity")||"1")||1;return"function"===g.typeOf(a)&&(b=a,a=arguments[1]),"boolean"===g.typeOf(b)&&(c=b,b=null,"function"===g.typeOf(arguments[2])&&(b=arguments[2])),0>=d||"none"===this.getStyle("display")||"hidden"===this.getStyle("visibility")||0===a||a===!1?(this.css({opacity:0}).hide(c),setTimeout(b,0),this):(this.css({opacity:0},{tween:a||"medium",callback:function(e){e.hide(c).css({opacity:d}),b&&b(e),a=b=null}}),this)},animateCSS:function(){var a,b,d,e;return a=function(a,b,c,d,e){var f,h,i,j=[],l=[];return a=a.toLowerCase(),"auto"!==b?(f=parseFloat((b+"").replace(k.regex.getNumericCSSValue,""))||0,i="string"===g.typeOf(b)&&b.match(k.regex.getCSSValueUnits),h=i&&i[0]||"px","opacity"===a&&(h="")):h="opacity"===a?"":"px",this._each(function(c,d){var e,i,m,n,o={};j[d]=parseFloat((g.nodeStyle(c,a)+"").replace(k.regex.getNonIntegerCharsSigned,""))||0,"auto"===b||""===b?(n=c.style.visibility||"",o[a]=b,o.visibility="hidden",g.applyCss(c,o),e=g.nodeStyle(c,a),(e===b||e.indexOf("px")<e.length-3)&&(m=a.substring(0,1).toUpperCase()+a.substring(1).toLowerCase(),e=c["offset"+m]+"px"),i="string"===g.typeOf(e)&&e.match(k.regex.getCSSValueUnits),l[d]={_actualTarget:b,numericTargetValue:parseFloat((e+"").replace(k.regex.getNumericCSSValue,""))||0,units:"opacity"===a?"":i&&i[0]||"px"},setTimeout(function(){c.style.visibility=n,c=null},51),o=e=i=null):l[d]={numericTargetValue:f,units:h}}),this.animate(function(b){this._each(function(c,d){var e,f={},h=b*(l[d].numericTargetValue-j[d])+j[d],i=l[d].units;"px"===i?h=Math.round(h):(e=parseFloat(h),h=0===e%1?Math.round(e):e.toFixed(2)),f[a]=h+i,g.applyCss(c,f)})},c,d,function(b){b._each(function(b,c){var d={};l[c]._actualTarget&&(d[a]=l[c]._actualTarget,g.applyCss(b,d))}),e.apply(b,arguments)})},b=function(a,b,c,d,e){var f=this._createAnimationObj(function(){},c,d,e),h=this,i={},j={};a=g.getStyleAsProperty(a),"number"===g.typeOf(b)&&"opacity"!==(a+"").toLowerCase()&&(b+="px"),i[g.getStyleAsCSS(a)]={duration:f.duration,timingFunction:f.easing},j[a]=b,setTimeout(function(){h._each(function(a){g.updateCssTransitions(a,i),g.applyCss(a,j),k.incrementAnimationCount(a)}),f._cb=function(){if(f){var b={};b[a]=null,h._each(function(a){g.updateCssTransitions(a,b),k.decrementAnimationCount(a)}),f.callback&&f.callback.call(h,h);for(var c in f)if(f.hasOwnProperty(c))try{delete f[c]}catch(d){}}f=j=e=h=null},setTimeout(f._cb,(parseInt(f.duration,10)||0)+20)},10)},e=function(){return d=void 0!==document.body.style[c+"Transition"]||void 0!==document.body.style.transition},function(){var c=!1;return"boolean"!==g.typeOf(d)&&e(),g.allowCssTransitions===!1&&c!==!0||!d?a.apply(this,arguments):b.apply(this,arguments),this}}(),animate:function(a){if(a){var b,c=this,d=this._createAnimationObj.apply(this,arguments);this._each(function(a){k.incrementAnimationCount(a)}),b=function(a){if(d.frameTime=a,d.position=d.frameTime-d.start,d.fraction=d.position/d.duration,d.position>=d.duration?(d.fraction=1,d.position=d.duration):d.easingMethod&&(d.fraction=d.easingMethod.call(g.easingMethods,d.fraction,d)),d.animator.call(c,d.fraction,d),1===d.fraction){for(var e=c._animations.length;e--;)if(c._animations[e]===d){c._animations.splice(e,1);break}d.callback&&setTimeout(function(){c._each(function(a){k.decrementAnimationCount(a)}),d.callback.call(c,c,d),c=d=null},10)}else d.timer=g.animationFrame.getTimer(b,g.baseAnimationInterval||10)},g.animationFrame.getTimer(b,g.baseAnimationInterval||10),this._animations.push(d)}return this},_createAnimationObj:function(a,b,c,d){var e={animator:a,duration:b,easing:"string"===g.typeOf(c)?c:"ease",callback:d,start:g.animationFrame.getStartTime(),frameTime:null};if("string"===g.typeOf(e.duration))switch(e.duration.toLowerCase()){case"long":case"slow":e.duration=k.animationTimes.slow;break;case"short":case"fast":e.duration=k.animationTimes.fast;break;default:e.duration=parseInt(e.duration,10)||k.animationTimes.medium}else e.duration=Math.round(e.duration)||k.animationTimes.medium;return k.animationTimeScale&&(e.duration*=k.animationTimeScale),e.easing&&g.easingMethods.hasOwnProperty(e.easing)?e.easingMethod=g.easingMethods[e.easing]:e.easing=null,e},classify:function(){var a,b,c=[],d="{*^de^*}"===arguments[0]?"removeClass":"addClass";for(a=0;a<arguments.length;a++)if(g.isArray(arguments[a]))for(b=0;b<arguments[a].length;b++)c.push(arguments[a][b]);else c.push(arguments[a]);return this._each(function(a){g[d](a,c)}),this},declassify:function(){var a=["{*^de^*}"].concat(Array.prototype.slice.call(arguments,0));return this.classify.apply(this,a)},hasClass:function(a,b){var c=b!==!0;return this._each(function(d){var e=(" "+d.className+" ").indexOf(" "+a+" ")>-1;b===!0?e&&(c=!0):e||(c=!1)}),c},setOpacity:function(a){return this._each(function(b){g.setOpacity(b,a)}),this},sumOf:function(a){var b=0,c=Array.prototype.slice.call(arguments,1);return this.constructor.prototype.hasOwnProperty(a)&&this._each(function(d){d=new g.NodeSelection(d),b+=d[a].apply(d,c)}),b},height:function(a,b){var c,d,e=0;return"object"!==g.typeOf(a)||b||(b=a,a=null),b=b||{},a||0===a?(a+="","auto"===a?c="":(d=/^([\-0-9\.]+)(.*?)$/.exec(a),a=Math.round(d&&d[1]||a)||0,c=d&&d[2]||"px"),this.css({height:a+c}),this):(this._each(function(a){e+=parseInt(a.offsetHeight,10)||0,b.border!==!0&&(e-=parseInt((g.nodeStyle(a,"border-top-width")+"").replace(k.regex.getNonIntegerCharsSigned,""),10)||0,e-=parseInt((g.nodeStyle(a,"border-bottom-width")+"").replace(k.regex.getNonIntegerCharsSigned,""),10)||0),b.margin===!0&&(e+=parseInt((g.nodeStyle(a,"margin-top")+"").replace(k.regex.getNonIntegerCharsSigned,""),10)||0,e+=parseInt((g.nodeStyle(a,"margin-bottom")+"").replace(k.regex.getNonIntegerCharsSigned,""),10)||0),b.padding===!1&&(e-=parseInt((g.nodeStyle(a,"padding-top")+"").replace(k.regex.getNonIntegerCharsSigned,""),10)||0,e-=parseInt((g.nodeStyle(a,"padding-bottom")+"").replace(k.regex.getNonIntegerCharsSigned,""),10)||0)}),e)},width:function(a,b){var c,d,e=0;return"object"!==g.typeOf(a)||b||(b=a,a=null),b=b||{},a||0===a?(a+="","auto"===a?c="":(d=/^([\-0-9\.]+)(.*?)$/.exec(a),a=d&&d[1]||a,c=d&&d[2]||"px"),this.css({width:a+c}),this):(this._each(function(a){e+=parseInt(a.offsetWidth,10)||0,b.border!==!0&&(e-=parseInt((g.nodeStyle(a,"border-left-width")+"").replace(k.regex.getNonIntegerCharsSigned,""),10)||0,e-=parseInt((g.nodeStyle(a,"border-right-width")+"").replace(k.regex.getNonIntegerCharsSigned,""),10)||0),b.margin===!0&&(e+=parseInt((g.nodeStyle(a,"margin-left")+"").replace(k.regex.getNonIntegerCharsSigned,""),10)||0,e+=parseInt((g.nodeStyle(a,"margin-right")+"").replace(k.regex.getNonIntegerCharsSigned,""),10)||0),b.padding===!1&&(e-=parseInt((g.nodeStyle(a,"padding-left")+"").replace(k.regex.getNonIntegerCharsSigned,""),10)||0,e-=parseInt((g.nodeStyle(a,"padding-right")+"").replace(k.regex.getNonIntegerCharsSigned,""),10)||0)}),e)},x:function(a){var b=this._nodes[0],c=null;if(b&&(c=b.offsetLeft,a===!0))for(;(b=b.parentNode)&&b!==document;)c+=parseFloat(b.offsetLeft)||0;return c},y:function(a){var b=this._nodes[0],c=null;if(b&&(c=b.offsetTop,a===!0))for(;(b=b.parentNode)&&b!==document;)c+=parseFloat(b.offsetTop)||0;return c},position:function(a,b,c,d){var e;return d=d||"px",arguments.length<1||1===arguments.length&&arguments[0]===!0?{x:this.x(arguments[0]===!0),y:this.y(arguments[0]===!0)}:(e={},"number"===puredom.typeOf(a)?e.left=a+d:"string"===puredom.typeOf(a)&&(e.left=a),"number"===puredom.typeOf(b)?e.top=b+d:"string"===puredom.typeOf(b)&&(e.top=b),this.css(e,c),this)},scrollLeft:function(a){return a||0===a?("number"!==g.typeOf(a)&&(a=Math.round((a+"").replace(k.regex.getNonIntegerCharsSigned,""))),this._each(function(b){b.scrollLeft=a}),void 0):this._nodes&&this._nodes[0]&&this._nodes[0].scrollLeft||0},scrollTop:function(a){return a||0===a?("number"!==g.typeOf(a)&&(a=Math.round((a+"").replace(k.regex.getNonIntegerCharsSigned,""))),this._each(function(b){b.scrollTop=a}),void 0):this._nodes&&this._nodes[0]&&this._nodes[0].scrollTop||0},focus:function(){return this._each(function(a){a.focus&&a.focus()}),this},blur:function(){return this._each(function(a){a.blur&&a.blur()}),this},selectAll:function(){this._each(function(a){a.SelectAll&&a.SelectAll(),a.select&&a.select(),a.selectionStart&&a.hasOwnProperty("value")&&(a.selectionStart=0,a.selectionEnd=a.value.length)})},getStyle:function(a,b){var c=[];return this._each(function(b){c.push(g.nodeStyle(b,a)||null)}),b===!1?(this.pushResult(c),this):c.length<=1?c[0]:c},value:function(a,b){if(b=b||{},null!==a&&void 0!==a&&arguments.length>0)return this._each(function(c){var d=(c.nodeName+"").toLowerCase(),e=(c.getAttribute("type")||"").toLowerCase();"input"!==d||"checkbox"!==e&&"radio"!==e?c.value=a:c.checked=!!a,b.fireChange!==!1&&g.fireEvent({type:"change",target:c,value:a})}),this;var c=[];return this._each(function(a){var b,d=(a.nodeName+"").toLowerCase(),e=(a.getAttribute("type")||"").toLowerCase();"input"!==d||"checkbox"!==e&&"radio"!==e?"select"===d?(b=a.multiselect||a.multiSelect?[]:null,g.el(a).query("option")._each(function(a){(a.selected||a.checked)&&(g.isArray(b)?b.push(a.value):b=a.value)}),c.push(b)):c.push(a.value):c.push(!!a.checked)}),c.length<2?c[0]:c},attr:function(a,b,c){var d,e,f=[];if(0===arguments.length){for(f={},d=this._nodes[0].attributes.length;d--;)e=this._nodes[0].attributes[d],e.specified&&(f[e.name||e.nodeName]=e.value||e.nodeValue);return f}if(arguments.length>1){if("object"===g.typeOf(a)){for(d in a)"string"==typeof d&&a.hasOwnProperty(d)&&this.attr(f,a[d]);return this}return this._each(function(c){try{c.setAttribute(a,b),!c.removeAttribute||null!==b&&void 0!==b||c.removeAttribute(a)}catch(d){}})}return this._each(function(b){var c=b.getAttribute(a);"string"!=typeof c&&(c=null),f.push(c)}),c===!1?(this.pushResult(f),this):f.length<=1?f[0]:f},prop:function(a,b,c){var d=[];return arguments.length>1?this._each(function(c){if(c[a]=b,void 0===b)try{delete c[a]}catch(d){}}):(this._each(function(b){var c;try{c=b[a]}catch(e){g.log("NodeSelection#prop("+a+") :: Access Error",e)}d.push(c||null)}),c===!1?(this.pushResult(d),this):d.length<=1?d[0]:d)},enable:function(){return this.attr("disabled",null),this.declassify("_puredom_disabled"),this},disable:function(){return this.attr("disabled","disabled"),this.classify("_puredom_disabled"),this},enabled:function(a){return a===!0||a===!1?(this[a?"enable":"disable"](),this):"disabled"!==this.attr("disabled")&&this.prop("disabled")!==!0&&!this.hasClass("_puredom_disabled")},addEvent:function(a,b,c){return this._each(function(d){g.addEvent(d,a,b,c)}),this},removeEvent:function(a,b,c){return this._each(function(d){g.removeEvent(d,a,b,c)}),this},fireEvent:function(a,b){return this._each(function(c){g.fireEvent(g.extend({},b||{},{type:a,target:c}))}),this},_removeAllEvents:function(a){var b;return this._each(function(a){k.wrappedEventListener.destroyObjHandlers(a,!0)}),b=this.children(),a===!0&&b.count()>0&&b._removeAllEvents(!0),b=a=null,this},appendChild:function(a){if(a&&this._nodes.length>0)if(a.constructor===this.constructor){var b=this._nodes[0];a._each(function(a){b.appendChild(a)})}else this._nodes[0].appendChild(a);return this},insertBefore:function(a,b){if(a&&this._nodes.length>0){if(b&&b.constructor===this.constructor&&(b=b._nodes[0]),!b||b.parentNode!==this._nodes[0])return this.appendChild(a);if(a.constructor===this.constructor){var c=this._nodes[0];a._each(function(a){c.insertBefore(a,b)},null,!0)}else this._nodes[0].insertBefore(a,b)}return this},insertInto:function(a){var b;return a&&this.count()>0&&(a.constructor===this.constructor&&(a=a._nodes[0]),1===this.count()?a.appendChild(this._nodes[0]):(b=document.createDocumentFragment(),this._each(function(a){b.appendChild(a)},null,!0),k.support.filters!==!0&&a.appendChild(b))),this},remove:function(){return this.fireEvent("remove"),this._each(function(a){a.parentNode&&a.parentNode.removeChild(a)}),this},destroy:function(){return this.remove(),this.fireEvent("destroy"),this._removeAllEvents(!0),this._nodes.splice(0,this._nodes.length),this},query:function(a,b){var c=[];return this._nodes.length>0&&(b=puredom.extend({},b||{}),this._each(function(d){var e;b.within=d,e=g.getElement(a,b),g.isArray(e)&&e.length>0&&(c=c.concat(e))})),new g.NodeSelection(c)},clone:function(a,b){var c=[];return b===!0&&(b=this.parent()),this._each(function(b){c.push(b.cloneNode(a!==!1))}),c=new g.NodeSelection(c),b&&b.appendChild(c),c._each(k.removeNodeUID),a!==!1&&c.query("*")._each(k.removeNodeUID),c},count:function(){return this._nodes.length},exists:function(){return this.count()>0},siblings:function(){var a=new g.NodeSelection;return this._each(function(b){for(var c=b;c=c.previousSibling;)"#text"!==c.nodeName&&"#comment"!==c.nodeName&&3!==c.nodeType&&a._nodes.push(c);for(c=b;c=c.nextSibling;)"#text"!==c.nodeName&&"#comment"!==c.nodeName&&3!==c.nodeType&&a._nodes.push(c)}),a},next:function(){for(var a=this._nodes[0]&&this._nodes[0].nextSibling;a&&3===a.nodeType;)a=a.nextSibling;return new g.NodeSelection(a&&[a]||null)},prev:function(){for(var a=this._nodes[0]&&this._nodes[0].previousSibling;a&&3===a.nodeType;)a=a.previousSibling;return new g.NodeSelection(a&&[a]||null)},previous:function(){return this.prev.apply(this,arguments)},firstChild:function(){return this.children().first()},lastChild:function(){return this.children().last()},nthChild:function(a){return this.children().index(a)},first:function(a){return new g.NodeSelection(this._nodes.slice(0,a||1))},last:function(a){return new g.NodeSelection(this._nodes.slice(this._nodes.length-(a||1)))},index:function(a,b){return new g.NodeSelection("number"===g.typeOf(a)&&this._nodes.slice(a,a+(b||1))||null)},parent:function(){var a,b=[];return this._each(function(c){a=c.parentNode,a&&b.indexOf(a)<0&&11!==a.nodeType&&b.push(a)}),new g.NodeSelection(b)},children:function(){var a,b,c=[];if(this._nodes.length>0)for(a=0;a<this._nodes.length;a++)if(this._nodes[a].childNodes)for(b=0;b<this._nodes[a].childNodes.length;b++)3!==this._nodes[a].childNodes[b].nodeType&&"#text"!==this._nodes[a].childNodes[b].nodeName&&"#comment"!==this._nodes[a].childNodes[b].nodeName&&c.push(this._nodes[a].childNodes[b]);return new g.NodeSelection(c)},submit:function(){return this._each(function(a){var b=g.fireEvent({type:"submit",target:a});b.rval!==!1&&b.returnValue!==!1&&b.preventDefault!==!0&&a.submit&&a.submit()})},selection:function(a,b){var c,d,e,f,h,i=this._nodes[0];return a&&"number"!=typeof a&&a.start&&(b=a.end,a=a.start),"number"!=typeof a?window.getSelection?(c="string"==typeof i.value?i.value:i.innerHTML,d=window.getSelection(),{start:i.selectionStart+0,end:i.selectionEnd+0,text:c.substring(d.start,d.end)}):document.selection?(d=document.selection.createRange(),e=document.body.createTextRange(),e.moveToElementText(i),e.setEndPoint("EndToStart",d),{start:e.text.length,end:e.text.length+d.text.length,text:d.text}):(g.log("Selection retrieval is not supported in this browser."),{start:0,end:0,text:""}):(0>a&&(a=0),f=i.value.length,b>f&&(b=f),a>b?a=b:a>b&&(b=a),window.getSelection?(i.selectionStart=a,i.selectionEnd=b):i.selectionEnd||0===i.selectionEnd?(i.selectionStart=a,i.selectionEnd=b):i.createTextRange&&(h=i.createTextRange(),h.collapse(!0),h.moveStart("character",a),h.moveEnd("character",b),h.select()),this)},template:function(a){var b,c=g.templateAttributeName;return a=a||{},b=function(a){var b,c=a.split("|");for(a=c.splice(0,1)[0],b=c.length;b--;)"htmlEntities"===c[b]&&c.splice(b,1);return c},this.query("["+c+"]").each(function(d){var e,f,h=d.nodeName(),i=d.attr(c),j=i;if(e=b(i),i=i.split("|")[0],j=puredom.delve(a,i),null!==j&&void 0!==j)if(("date"==typeof j||j.constructor===Date)&&(j=j.toLocaleString()),f=d.attr("data-tpl-prop"))d.prop(f,g.text.filter(j,e.join("|")));else switch(h){case"select":case"input":case"textarea":case"meter":case"progress":d.value(j);break;case"img":case"video":case"audio":case"iframe":e.splice(0,0,"htmlEntities"),j=g.text.filter(j,e.join("|")),d.attr("src",j);break;default:e.splice(0,0,"htmlEntities"),j=g.text.filter(j,e.join("|")),d.html(j)}}),a=null,this}}),g.NodeSelection.prototype.on=g.NodeSelection.prototype.addEvent,g.NodeSelection.prototype.animateCss=g.NodeSelection.prototype.animateCSS,k.incrementAnimationCount=function(a){a._puredom_animationCount=k.getAnimationCount(a)+1,1===a._puredom_animationCount&&g.addClass(a,"_puredom_animating")},k.decrementAnimationCount=function(a){var b=Math.max(0,k.getAnimationCount(a));b>1?a._puredom_animationCount=b-1:(a._puredom_animationCount=null,g.removeClass(a,"_puredom_animating"))},k.getAnimationCount=function(a){return parseInt(a._puredom_animationCount,10)||0},k.unload=function(){k.wrappedEventListener.reset(),g.getElement.clearCache(),k._nodeToIdList={},setTimeout(function(){window.puredom=k=j=e=null},10)},g.el=function(a,b){var c,d;if(a)if(d=typeof a,"string"===d&&"<"!==a.charAt(0))b===!0&&g.log("query is a CSS selector",a,d),c="body"===a?document.body:"html"===a?document.documentElement||document:g.getElement(a,arguments[1]);else if(g.isArray(a)){c=[];for(var e=0;e<a.length;e++)Array.prototype.splice.apply(c,[0,0].concat(g.el(a[e])._nodes))}else if("string"===d||"object"===d&&!a.nodeName&&a!==window)b===!0&&g.log("query is an HTML fragment",a,d),c=g.createElement.apply(g,arguments);else{if(a.constructor===g.NodeSelection)return b===!0&&g.log("query is already a NodeSelection",a.constructor+"",a.constructor.name),a;(a.nodeName||a===window)&&(b===!0&&g.log("query is an HTML element",a,d),a===window&&(a=document.documentElement||document),c=a)}return new g.NodeSelection(c)},g.node=function(a){return new g.NodeSelection(k.idToNode(a))},g.getElement=function(){function a(a,c){var d;c=c||b.baseNode,a=a.replace(/(\[[^\[\]= ]+=)([^\[\]"']+)(\])/gim,'$1"$2"$3');try{d=c.querySelectorAll(a),d&&(d=g.toArray(d))}catch(e){g.log("Native querySelectorAll failed for selector: "+a+", error:"+e.message)}return d||!1}var b,c,d,e={},f=!1,h=/^((?:[a-z][a-z0-9\_\-]*)|\*)?/gi,i=/^\s*(.*?)\s*$/gm,j=!1;return d=[{title:"ID selector {#id}",regex:/^#[_a-zA-Z0-9-]*/gm,filter:function(a,b,c){var d=c.searchBaseNode&&c.searchBaseNode.getElementById?c.searchBaseNode:document;return[d.getElementById(a[0].substring(1))]}},{title:"Class selector {.className}",regex:/^\.([^#.:\[<>\{+\|\s]+)/gim,filter:function(a,b){var c,d,e=" "+a[1]+" ";for(c=b.length;c--;)d=b[c]&&b[c].className,d&&-1!==(" "+d+" ").indexOf(e)||b.splice(c,1)}},{title:"Attribute selector {[name=value] & variants}",regex:/^\[([^\^\$\~=]+)(?:([\^\$\~=]+)(['"]?)([^\]]*))?\3\]/g,filter:function(a,b){var c,d,e,f,h;if(a&&a[1])for(d={attribute:a[1]},a[2]&&a[4]&&(d.type=a[2],d.attrValue=a[4]||""),c=b.length;c--;){switch(e=!1,f="checked"===d.attribute?"true"===d.attrValue||"false"===d.attrValue?b[c].checked?"true":"false":b[c].checked?"checked":null:"selected"===d.attribute?"true"===d.attrValue||"false"===d.attrValue?b[c].selected?"true":"false":b[c].selected?"selected":null:b[c]&&b[c].getAttribute(d.attribute+""),d.attrPresent="string"===g.typeOf(f),d.attrSet=f&&f.length>0,d.attrValue&&(h=d.attrPresent?f.indexOf(d.attrValue):-1),d.type||""){case"=":e=f===d.attrValue;break;case"^=":e=0===h;break;case"$=":e=d.attrSet&&f.substring(f.length-d.attrValue.length)===d.attrValue;break;case"~=":e=h>-1;break;default:e=!d.attrValue&&d.attrPresent}e||b.splice(c,1)}}},{title:"Descendant selector {>}",regex:/^\s*\>\s*((?:[a-z][a-z0-9\:\_\-]*)|\*)?/gi,filter:function(a,b,c){var d,e,f,h,i=[].concat(b),j=(a[1]||"*").toLowerCase();for(b.splice(0,b.length),!c.isFiltered&&c.first&&g.log("Descendant selector called on an unfiltered result set.  Operating on descendants of the document."),(!c.isFiltered||c.first)&&(i=[c.searchBaseNode]),d=0;d<i.length;d++)for(f=i[d].childNodes,e=0;e<f.length;e++)h=(f[e].nodeName+"").toLowerCase(),(h===j||"*"===j&&"#"!==h.charAt(0)&&(1===f[e].nodeType||9===f[e].nodeType))&&b.push(f[e])}},{title:"nth-child aliases, like :first-child",regex:/^\:(first|last|only)\-(child|of\-type)/gm,filter:function(a,b,c){var e,f,h,i,j={"first-child":":nth-child(0n+1)","first-of-type":":nth-of-type(0n+1)","last-child":":nth-last-child(0n+1)","last-of-type":":nth-last-of-type(0n+1)"};for(e=d.length;e--;)if(d[e].isNthChildSelector===!0){f=d[e];break}return j.hasOwnProperty(a[1]+"-"+a[2])&&f?(h=j[a[1]+"-"+a[2]],f.regex.lastIndex=0,i=f.regex.exec(h),f.filter(i,b,c)):(g.log('Unknown nth-child alias "'+a[1]+"-"+a[2]+'"'),void 0)}},{isNthChildSelector:!0,title:"nth-child selector {:nth-child(n+2) & variants}",regex:/^\:(nth(?:\-last)?(?:\-of\-type|\-child))\((?:(\-?[0-9]*n(?:[+-][0-9]+)?)|([0-9]+)|([a-z]+))\)/gm,filter:function(a,b){var c,d,e,f,h,i,j,k,l,m,n=-1!==a[1].indexOf("-of-type"),o={odd:[2,1],even:[2]};if(c=b.splice(0,b.length),-1!==a[1].indexOf("-last")&&c.reverse(),a[2]?(f=a[2].split("n"),0===f[0].replace("-","").length&&(f[0]=f[0]+"1"),l=Math.round(f[0].replace("+",""))||0,m=Math.round(f[1].replace("+",""))||0):a[3]?(l=0,m=Math.round(a[3])||0):a[4]&&(f=a[4].toLowerCase(),o.hasOwnProperty(f)?(l=o[f][0]||0,m=o[f][1]||0):g.log('Unknown named nth-child expression "'+r[4]+'"')),!(0>=l+m))for(l===m&&(m=0),d=0;d<c.length;d++){if(children=(c[d].parentNode||{}).childNodes,i=(c[d].nodeName+"").toLowerCase(),isMatch=!1,children)for(k=0,e=0;e<children.length&&(j=children[e],h=n?(j.nodeName+"").toLowerCase()===i:"#"!==(j.nodeName+"").substring(0,1)||1===j.nodeType||9===j.nodeType,!h||(k+=1,j!==c[d]||!(isMatch=l>0?0===k%l-m:k===m)));e++);isMatch&&b.push(c[d])}}},{title:"within_internal selector { }",regex:/^\s+((?:[a-z][a-z0-9\:\_\-]*)|\*)?/gi,filter:function(a,b){var c,d=[].concat(b),e=a[1]||"*";for(b.splice(0,b.length),c=0;c<d.length;c++)Array.prototype.splice.apply(b,[b.length-1,0].concat(g.toArray(d[c].getElementsByTagName(e))))}}],c=function(a){a.lastIndex=0},b=function(l,m){var n,o,p,q,r,s,t,u,v,w,x,y,z,A=b.baseNode||(b.baseNode=document&&document.documentElement||document),B=l,C=0,D=!1,E=!k.support.querySelectorAll,F=Date.now();if(l=(l+"").replace(i,"$1"),m=puredom.extend({},m||{}),m.logging===!0&&(D=!0),f&&m.useCache===!0&&e[l])return e[l];
if(m.within&&(A=m.within),A&&A.length&&!A.nodeName&&A.indexOf&&A[0]&&(A=A[0]),l.indexOf(",")>-1){for(l=l.split(","),o=[],z=l.length;z--;)if(l[z]=l[z].replace(i,"$1"),l[z].length>0&&(t=b(l[z],puredom.extend({},m,{logging:!1,internalLogging:D,internal:!0}))))for(y=0;y<t.length;y++)-1===o.indexOf(t[y])&&o.push(t[y]);return D&&g.log("query=",B,", result=",node),F=Date.now()-F,F>100&&g.log('Slow Selector Warning: "'+B+'" took '+F+"ms to complete."),o}if(l.match(/^#[^\s\[\]\(\)\:\*\.\,<>#]+$/gim))return n=[(A.getElementById?A:document).getElementById(l.substring(1))];if(p=l.match(h),p=(p&&p[0]||"").toLowerCase(),l=l.substring(p.length),s=l,">"===B.charAt(0)&&(E=!0),k.support.querySelectorAll&&E!==!0&&(n=a(B,A),n===!1&&(n=[],E=!0)),E)for("#"===l.substring(0,1)?n=[]:p&&"*"!==p||!document.all||window.opera||A!==document&&A!==document.documentElement?(n=g.toArray(A.getElementsByTagName(p||"*")),v=!0):(n=g.toArray(A.all||document.all),v=!1),q={searchBaseNode:A,negated:!1,first:!0,isFiltered:v||!(!p||"*"===p)};s.length>0;){for(C+=1,u=!1,y=0;y<d.length&&(j===!0&&(w=Date.now()),c(d[y].regex),t=d[y].regex.exec(s),j===!0&&(w=Date.now()-w),t&&(u=!0,D&&g.log((d[y].title||d[y].regex)+' ==>> matched:"'+s.substring(0,t[0].length)+'" ==>> remaining:"'+s.substring(t[0].length)+'" ||debug>> (submatches:'+t.slice(1).join(",")+")"),j===!0&&(x=Date.now()),r=d[y].filter(t,n,q),r&&g.isArray(r)&&(n=r),j===!0&&(x=Date.now()-x),s=s.substring(t[0].length),q.first=!1,q.isFiltered=!0),j===!0&&(d[y].matchTimes.push(w),u&&d[y].filterTimes.push(x)),0!==s.length);y++);if(!u)throw new Error("puredom.getElement() :: Unknown CSS selector near: "+s.substring(0,20),"puredom.js",2689)}if(m.includeInvisibles!==!0)for(y=n.length;y--;)n[y]&&"#"===(n[y].nodeName+"").charAt(0)&&n.splice(y,1);return D&&g.log("query=",B,", result=",n),f&&m.cache===!0&&(e[l]=n),m.internal!==!0&&D===!0&&(F=Date.now()-F,F>10&&g.log('Slow Selector Warning: "'+B+'" took '+F+"ms to complete. "+C+" parse iterations.")),n},b.enableCache=function(a){f=a!==!1,f||(e={})},b.disableCache=function(){f=!1,e={}},b.clearCache=function(){e={}},b._normalizeSelectorFilter=function(a){return 2===arguments.length&&(a={regex:arguments[0],filter:arguments[1]}),a&&a.regex&&a.filter?a:!1},b.addSelectorFilter=function(a){return a=b._normalizeSelectorFilter.apply(b,arguments),a?(d.push(a),!0):!1},b.removeSelectorFilter=function(a){var c,e,f;if(a=b._normalizeSelectorFilter.apply(b,arguments))for(c=d.length;c--;){f=!0;for(e in d[c])if(d[c].hasOwnProperty(e)&&d[c][e]!==a[e]){f=!1;break}if(f){d.splice(c,1);break}}return f===!0},j===!0?(!function(){for(var a=0;a<d.length;a++)d[a].matchTimes=[],d[a].filterTimes=[]}(),b.selectorStats=function(){var a,b,c,e,f,g,h={title:"--- Selector Statistics: ---",selectors:[]};for(b=0;b<d.length;b++){if(c=d[b],a={},a.title=c.title,g=0,c.matchTimes.length>0){for(f=0,e=0;e<c.matchTimes.length;e++)f+=c.matchTimes[e];g+=f,a.matching=Math.round(f/c.matchTimes.length)+"ms"}if(c.filterTimes.length>0){for(f=0,e=0;e<c.filterTimes.length;e++)f+=c.filterTimes[e];g+=f,a.filtering=Math.round(f/c.filterTimes.length)+"ms"}a.own_time=g+"ms",a.calls=c.matchTimes.length,h.selectors.push(a)}return h}):b.selectorStats=function(){return"disabled"},b}(),g.selectorEngine=g.getElement,g.DOMEvent=function(a){a&&(this.type=a.replace(/^on/gi,""))},g.DOMEvent.displayName="puredom.DOMEvent",g.extend(g.DOMEvent.prototype,{which:null,type:"",target:null,relatedTarget:null,preventDefault:function(){this.defaultPrevented=!0},stopPropagation:function(){this.propagationStopped=!0,this.bubblingCancelled=!0},cancel:function(){return this.preventDefault(),this.stopPropagation(),this.returnValue=!1,!1},returnValue:!0,originalEvent:null,timeStamp:null}),g.DOMEvent.prototype.cancelBubble=g.DOMEvent.prototype.stopPropagation,g.DOMEvent.prototype.stop=g.DOMEvent.prototype.cancel,g.DOMEvent.prototype.prevent=g.DOMEvent.prototype.cancel,k.wrappedEventListener={list:[],none:{},summary:function(){for(var a=0;a<this.list.length;a++)g.log(k.idToNode(this.list[a].target),".on",this.list[a].type," -> ",this.list[a].handler.displayName||this.list[a].handler.name)},reset:function(a){var b,c;if(a===!0)for(b=this.list.length;b--;)c=this.list[b],this.list[b]=this.none,g.removeEvent(k.idToNode(c.target),c.type,c.wrappedHandler),this.unsetRefs(c),window.killCount=(window.killCount||0)+1;this.list.splice(0,this.list.length)},destroyObjHandlers:function(a){var b,c,d=k.nodeToId(a);for(b=this.list.length;b--;)c=this.list[b],c.target===d&&(this.unsetRefs(c),this.list.splice(b,1),g.removeEvent(a,c.type,c.wrappedHandler),window.killCount=(window.killCount||0)+1)},get:function(a,b,c,d){var e,f;for(c=k.nodeToId(c),e=this.list.length;e--;)if(f=this.list[e],f.target===c&&f.handler===b&&f.type===a){b=f.wrappedHandler,d===!0&&(this.list.splice(e,1),window.killCount=(window.killCount||0)+1,this.unsetRefs(f));break}return b},unsetRefs:function(a){a.wrappedHandler.type=null,a.wrappedHandler.handler=null,a.wrappedHandler.target=null},internalFireEvent:function(a){var b,c,d,e=k.nodeToId(a.target),f=a.type.replace(/^on/gm,"");for(b=this.list.length;b--&&(c=this.list[b],c.target!==e||c.type!==f||(d=c.handler.call(a.target,a),d!==!1)););},create:function(a,b,c){var d={type:a,target:k.nodeToId(c),handler:b,wrappedHandler:function(a){var b,c,d=arguments.callee.handler,e=(arguments.callee.type||a.type).toLowerCase().replace(/^on/,""),f=this!==window?this:k&&k.idToNode(arguments.callee.target),h={isInSelf:!1,doPreventDefault:!1,doCancelBubble:!1,doStopPropagation:!1,e:a||window.event,ret:null,end:function(){return h.end=null,a=b=h=d=e=f=null,this.ret}};k&&k.idToNode||g.log("target:<"+a.target.nodeName+' class="'+a.target.className+'" id="'+a.target.id+'"'+"> , type:"+e+"/"+a.type),a=h.e,b=g.extend(new g.DOMEvent(e),{which:a.which,target:a.target||a.srcElement||f||document.body,relatedTarget:a.relatedTarget||("mouseout"===e?a.toElement:a.fromElement),returnValue:!0,originalEvent:a,timeStamp:a.timeStamp||Date.now()});for(c in a)b.hasOwnProperty(c)||"function"==typeof a[c]||c===c.toUpperCase()||"layerX"===c||"layerY"===c||(b[c]=a[c]);b.target||g.log("Event target doesn't exist for type \""+b.type+'": ',b.target,", srcElement=",a.srcElement),"touchend"===a.type&&k._lastTouchPos?(b.pageX=k._lastTouchPos.pageX,b.pageY=k._lastTouchPos.pageY):a.touches&&a.touches[0]?(b.pageX=a.touches[0].pageX,b.pageY=a.touches[0].pageY,k._lastTouchPos={pageX:b.pageX,pageY:b.pageY}):(a.pageX||0===a.pageX||a.clientX||0===a.clientX)&&(b.pageX=a.pageX||a.clientX+document.body.offsetLeft,b.pageY=a.pageY||a.clientY+document.body.offsetTop),(e.indexOf("key")>-1||a.keyCode||a.charCode)&&(b.keyCode=a.keyCode||a.which,b.charCode=a.keyCode||a.charCode||a.which,b.which=a.which),(e.indexOf("mouse")>-1||e.indexOf("click")>-1||null!==a.button&&void 0!==a.button)&&(b.button="number"==typeof a.button?a.button:a.which),b.target&&3===b.target.nodeType&&3!==f.nodeType&&(b.target=b.target.parentNode),h.searchNode=b.relatedTarget||b.target;do if(h.searchNode===f){h.isInSelf=!0;break}while(h.searchNode&&(h.searchNode=h.searchNode.parentNode)&&h.searchNode!==document);if("mouseover"!==e&&"mouseout"!==e||!h.isInSelf){if(d&&d.call&&(h.handlerResponse=d.call(f,b)),b.returnValue=h.handlerResponse!==!1&&b.returnValue!==!1,b.defaultPrevented&&(b.returnValue=a.returnValue=!1,a.preventDefault&&a.preventDefault()),b.bubblingCancelled===!0||b.propagationStopped===!0||b.cancelBubble===!0){a.stopPropagation&&a.stopPropagation();try{a.cancelBubble&&a.cancelBubble.call?a.cancelBubble():a.cancelBubble=!0}catch(i){}}h.ret=b.returnValue}else h.ret=!0;return h.end()}};return d.wrappedHandler.displayName="wrappedEventHandler_"+a,d.wrappedHandler.handler=b,d.wrappedHandler.type=a,d.wrappedHandler.target=d.target,this.list.push(d),c=a=b=d=null,this.list[this.list.length-1].wrappedHandler}},k.getSubjectDescription=function(a){return(a.nodeName?g.el(a)+"":a.constructor&&a.constructor.name||a.name||a)+""},g.eventTypeMap={},k.support.webkitMultitouch&&g.extend(g.eventTypeMap,{mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"}),g.addEvent=function(a,b,c,d){var e,f;if(a){if("string"===g.typeOf(b)&&b.indexOf(",")>-1&&(b=b.replace(/\s/gm,"").split(",")),g.isArray(b)){for(e=0;e<b.length;e++)g.addEvent(a,b[e],c);return!0}if(f=b=(b+"").toLowerCase().replace(/^\s*(on)?(.*?)\s*$/gim,"$2"),"string"!=typeof b||!c||!c.call)return g.log("Attempted to add event with invalid type or handler:",{type:b,handler:c+"",subject:k.getSubjectDescription(a),useCapture:d===!0}),void 0;g.eventTypeMap.hasOwnProperty(b)&&(b=g.eventTypeMap[b]),c=k.wrappedEventListener.create(f,c,a),a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&(a.addEventListener(b,c,d===!0),g._eventCount=(g._eventCount||0)+1)}},g.removeEvent=function(a,b,c,d){var e,f;if(a){if("string"===g.typeOf(b)&&b.indexOf(",")>-1&&(b=b.replace(/\s/gm,"").split(",")),g.isArray(b)){for(e=0;e<b.length;e++)g.removeEvent(a,b[e],c,d);return!0}if(f=b=(b+"").toLowerCase().replace(/^\s*(on)?(.*?)\s*$/gim,"$2"),"string"!=typeof b||!c||!c.call)return g.log("Attempted to remove event with invalid type or handler:",{type:b,handler:c+"",subject:k.getSubjectDescription(a),useCapture:d===!0}),void 0;if(g.eventTypeMap.hasOwnProperty(b)&&(b=g.eventTypeMap[b]),c=k.wrappedEventListener.get(f,c,a,!0),a.detachEvent)a.detachEvent("on"+b,c);else if(a.removeEventListener)try{a.removeEventListener(b,c,d===!0),g._eventCount=(g._eventCount||0)-1}catch(h){}}},g.cancelEvent=function(a){if(a=a||window.event){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation();try{a.cancelBubble=!0}catch(b){}a.returnValue=!1}return!1},g.fireEvent=function(a){var b,c,d,e,f;if(a=a||{},document.createEventObject){a=g.extend({},a),a.type="on"+a.type.toLowerCase().replace(/^on/,"");try{b=document.createEventObject()}catch(h){f=!0}if(!f){for(d in a)if(a.hasOwnProperty(d))try{b[d]=a[d]}catch(h){}try{c=a.target.fireEvent(a.type,b),e=b.preventDefault===!0}catch(h){f=!0}}f&&k.wrappedEventListener.internalFireEvent&&k.wrappedEventListener.internalFireEvent(a)}else{b=document.createEvent("HTMLEvents"),b.initEvent(a.type.toLowerCase().replace(/^on/,""),!0,!0);for(d in a)if(a.hasOwnProperty(d))try{b[d]=a[d]}catch(h){}c=!a.target.dispatchEvent(b),e=b.preventDefault===!0}return{evt:b,preventDefault:e,rval:c}},k._nodeToIdIndex=0,k._nodeToIdList={},k.nodeToId=function(a){var b,c;return a===window?"_td_autoid_window":a===document.documentElement?"_td_autoid_html":a===document.body?"_td_autoid_body":(b=/\s_td_autoid_([0-9]+)\s/gm.exec(" "+a.className+" "),b&&b[1]?c=b[1]:(k._nodeToIdIndex+=1,c=k._nodeToIdIndex+"",g.addClass(a,"_td_autoid_"+c)),k.ensureNodeIdListing(a,c),c)},k.idToNode=function(a){var b,c,d=k._nodeToIdList[a+""];return"_td_autoid_window"===a?window:"_td_autoid_html"===a?document.documentElement:"_td_autoid_body"===a?document.body:(d&&(c=g.getElement(d),/\s_td_autoid_[0-9]+\s/gm.exec(" "+c.className+" ")||(c=null)),c||(b=g.getElement("._td_autoid_"+a),c=b&&b[0],c&&k.ensureNodeIdListing(c,a)),c||!1)},k.ensureNodeIdListing=function(a,b){var c;a.getAttribute&&(c=a.getAttribute("id"),c||(c="_td_autoid_"+b,a.setAttribute("id",c)),k._nodeToIdList[b]="#"+c)},k.removeNodeUID=function(a){var b=a.getAttribute("id");b&&b.match(/^_td_autoid_[0-9]+$/g)&&(a.removeAttribute?a.removeAttribute("id"):a.setAttribute("id","")),a.className&&(a.className=a.className.replace(/(^|\b)_td_autoid_[0-9]+(\b|$)/gim,""))},g.animationFrame=function(a){var b={manualFramerate:11};return window.mozRequestAnimationFrame?a="moz":window.webkitRequestAnimationFrame&&(a="webkit"),b.nativeSupport=!!a,b.nativeSupport?(b.getTimer=function(b){return window[a+"RequestAnimationFrame"](b)},b.cancelTimer=function(b){window[a+"CancelRequestAnimationFrame"](b)},b.getStartTime=function(){return window[a+"AnimationStartTime"]||(new Date).getTime()}):(b.getTimer=function(a){return setTimeout(function(){a((new Date).getTime()),a=null},b.manualFramerate)},b.cancelTimer=function(a){clearTimeout(a)},b.getStartTime=function(){return(new Date).getTime()}),b}(),g.setOpacity=function(a,b){1>=b&&b>0&&(b=100*b),b=Math.round(b),100>b?(a.style.opacity=parseFloat(b/100).toFixed(2),a.style.filter="alpha(opacity="+b+")"):(a.style.opacity=null,a.style.filter=null)},g.applyMsFilter=function(a,b,c){var d,e,f,h,i,j="",l="MsFilter"===k.support.filterProperty?'"':"";if(b=b.charAt(0).toUpperCase()+b.substring(1),"string"==typeof c)for(j=c,c={},h=j.replace(/\s*(,|=)\s*      /gm,"$1").split(","),f=0;f<h.length;f++)i=h[f].indexOf("="),c[h[f].substring(0,i)]=h[f].substring(i+1);else{for(f in c)c.hasOwnProperty(f)&&(j+=", "+f+"="+c[f]);j=j.replace(",","")}try{d=a.filters&&a.filters.item&&(a.filters.item("DXImageTransform.Microsoft."+b)||a.filters.item(b))}catch(m){}if(d){for(f in c)c.hasOwnProperty(f)&&"enabled"!==f&&(d[f]=c[f]);d.enabled=c.enabled?1:0}else e=a.style.MsFilter||a.style.filter||"",e+=" "+(g.nodeStyle(a,"MsFilter")||g.nodeStyle(a,"filter")||""),e&&(e=e.replace(new RegExp('(^|\\s|\\))"?((progid\\:)?DXImageTransform\\.Microsoft\\.)?'+b+'\\s*?\\(.*?\\)"?\\s*?',"gim"),"$1")+" "),a.style[k.support.filterProperty]=e+l+"progid:DXImageTransform.Microsoft."+b+"("+j+")"+l;a.style.zoom||(a.style.zoom=1)};var m={};g.applyCss=function(c,d){var e,f,h,i,j;d=d||{};for(e in d)if(d.hasOwnProperty(e))try{f=g.getStyleAsCSS(e),f=f.replace(/^\-(moz|webkit|ms|o|vendor)\-/gim,b+"-"),f=g.getStyleAsProperty(f),f=a(f),"opacity"===f&&k.support.filters?(j=Math.round(100*parseFloat(d[e])),100>j?g.applyMsFilter(c,"alpha",{enabled:!0,opacity:j}):g.applyMsFilter(c,"alpha",{enabled:!1})):"--box-shadow"===f&&k.support.filters?(h=d[e].match(/\b(\#[0-9af]{3}[0-9af]{3}?|rgba?\([0-9\,\s]+\))\b/gim),h=h&&h[0]||"",i=(" "+d[e]+" ").replace(h,"").replace(/\s+/m," ").split(" ").slice(1,4),g.applyMsFilter(c,"glow",{Color:h,Strength:Math.round(i[3].replace(/[^0-9\-\.]/gim,""))})):c.style[f]=d[e]}catch(l){}},g.getStyleAsProperty=function(a){return"string"!=typeof a?null:(a=a.replace(/\-[a-z0-9]/gim,k.styleAsPropReplacer),a=a.replace(/^(webkit|moz|ms|o)[A-Z]/gm,k.styleAsPropVendorPrefixReplacer))},k.styleAsPropReplacer=function(a){return a.charAt(1).toUpperCase()},k.styleAsPropVendorPrefixReplacer=function(a){return a.charAt(0).toUpperCase()+a.substring(1)},g.getStyleAsCSS=function(a){return"string"==typeof a&&a.replace(/\-*([A-Z])/gm,"-$1").toLowerCase()||null},k.parseCSS=function(a){var b,c,d=/\s*([a-z\-]+)\s*:\s*([^;]*?)\s*(?:;|$)/gi;if(a)for(b={},d.lastIndex=0;c=d.exec(a);)b[g.getStyleAsProperty(c[1])]=c[2];return b},g.getCssTransitions=function(a){var b,c,d,e,f={},h={properties:"-vendor-transition-property",durations:"-vendor-transition-duration",timingFunctions:"-vendor-transition-timing-function"};for(b in h)h.hasOwnProperty(b)&&(h[b]=(g.nodeStyle(a,h[b])||"").replace(/\s/,"").split(","));for(c=0;c<h.properties.length;c++)!h.properties[c]||"null"===h.properties[c]||"all"===h.properties[c]&&h.durations[c].match(/^[0\.ms]*$/)||(d=h.durations[c]||h.durations[h.durations.length-1],e=parseFloat(d.replace(/[^\-0-9\.]/gim,""))||0,d.match(/ms$/i)||(e*=1e3),f[g.getStyleAsProperty(h.properties[c])]={duration:e,timingFunction:h.timingFunctions[c]||h.timingFunctions[h.timingFunctions.length-1]||"ease"});return f},g.setCssTransitions=function(a,b){var c,d={"-vendor-transition-property":[],"-vendor-transition-duration":[],"-vendor-transition-timing-function":[]};for(c in b)b.hasOwnProperty(c)&&b[c]&&(d["-vendor-transition-property"].push(c.toLowerCase()),d["-vendor-transition-duration"].push((b[c].duration/1e3).toFixed(3)+"s"),d["-vendor-transition-timing-function"].push(b[c].timingFunction||"ease"));for(c in d)d.hasOwnProperty(c)&&(d[c]=d[c].join(", "));g.applyCss(a,d)},g.updateCssTransitions=function(a,b){var c,d;if(b){c=g.getCssTransitions(a);for(d in b)b.hasOwnProperty(d)&&(b[d]?c[d]=b[d]:delete c[d]);g.setCssTransitions(a,c)}},g.addClass=function(a,b){var c,d;if(b){if(g.isArray(b)||(b=[b]),c=a.className||"",c.length>0){for(c=" "+c+" ",d=0;d<b.length;d++)for(;c.indexOf(" "+b[d]+" ")>-1;)c=c.replace(" "+b[d]+" "," ");c=c.substring(1)}a.className=(c+b.join(" ")).replace(/\s+/gim," ")}},g.removeClass=function(a,b){var c,d;if(b){if(g.isArray(b)||(b=[b]),c=a.className||"",c.length>0){for(c=" "+c+" ",d=0;d<b.length;d++)for(;c.indexOf(" "+b[d]+" ")>-1;)c=c.replace(" "+b[d]+" "," ");c=c.substring(1)}a.className=c.replace(/\s+/gim," ")}},g.nodeStyle=function(a,c){var d,e,f,g=(c+"").replace(/[A-Z]/g,"-$0").toLowerCase();return g=g.replace(/^\-(moz|webkit|ms|o|vendor)\-/gim,b+"-"),d=g.replace(/\-[a-z]/gim,function(a){return a.substring(1).toUpperCase()}),"opacity"===g&&k.support.filters?a.filters.alpha&&a.filters.alpha.enabled!==!1&&Math.round(a.filters.alpha.opacity)/100:(a.style&&a.style[d]?f=a.style[d]||"":a.currentStyle&&a.currentStyle[d]?f=a.currentStyle[d]||a.currentStyle[g]||"":document.defaultView&&document.defaultView.getComputedStyle?(e=document.defaultView.getComputedStyle(a,null),f=e&&(e.getPropertyValue(g)||e.getPropertyValue(d))||""):window.getComputedStyle&&(e=window.getComputedStyle(a,null),f=e&&(e.getPropertyValue(g)||e.getPropertyValue(d))||""),f)},g.htmlEntities=function(a,b){var c=["htmlEntities"];return b===!0&&c.push("stripTags"),g.text.filter(a,c)},g.log=function(){window.console&&window.console.log&&window.console.log.apply(window.console,arguments)},g.addNodeSelectionPlugin=function(a,b){g.NodeSelection.prototype.hasOwnProperty(a)||(g.NodeSelection.prototype[a]=function(){var a=b.apply(this,arguments);return null===a||void 0===a?this:a})},g.init=function(){i||(i=!0,g.forEach(k.oninit,function(a){a.call(g,g)}),g.fireEvent({target:document.body,type:"puredomready",puredom:g}))},g.addEvent(document,"DOMContentLoaded",g.init),g.addEvent(window,"load",g.init),g.addEvent(window,"unload",k.unload),function(){if(f){for(var a in f)f.hasOwnProperty(a)&&(g[a]=f[a]);f=null}}(),k.puredom=function(a){return"function"===g.typeOf(a)?(i===!0?a.call(g,g):k.oninit.push(a),g):g.el.apply(g,arguments)},g.extend(g,h),g.toString=function(){return"function puredom(){}"},window.puredom=g,"function"==typeof window.define&&window.define.amd&&window.define("puredom",function(){return g})}(),puredom.extend(puredom,{text:function(){var a=function(){return a.filter.apply(this,arguments)},b={htmlEntities:/[&<>"]/gim,ucWords:/(^|\s)[a-z]/gim,ucFirst:/^[a-z]/gim,nl2br:/\r?\n/g,numbersOnly:/[^0-9.\-]/gim,trim:/^\s*?(.*?)\s*?$/gim};return a.filter=function(b,c){var d,e,f,g,h;if("array"!==puredom.typeOf(c)&&(c=((c||"")+"").split("|")),arguments.length>2)for(d=2;d<arguments.length;d++)"array"===puredom.typeOf(arguments[d])?c=c.concat(arguments[d]):c.push(arguments[d]);for(d=0;d<c.length;d++){e=c[d],g=[b],f=e.indexOf(":"),f>-1&&(e=e.substring(0,f),g=g.concat(c[d].substring(f+1).split(",")));for(h in a)if((h+"").toLowerCase()===e.toLowerCase()){b=a[h].apply(a,g);break}}return b},a.escape=function(a){return encodeURIComponent(a)},a.unescape=function(a){return decodeURIComponent(a)},a.htmlEntities=function(a){var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};return(a+"").replace(b.htmlEntities,function(a){return c[a]})},a.ucWords=function(a){return(a+"").toLowerCase().replace(b.ucWords,function(a){return a.toUpperCase()})},a.ucFirst=function(a){return(a+"").toLowerCase().replace(b.ucFirst,function(a){return a.toUpperCase()})},a.nl2br=function(a){return(a+"").replace(b.nl2br,"<br />")},a.numbersOnly=function(a){return(a+"").replace(b.numbersOnly,"")},a.truncate=function(a,b,c,d){var e=!1,f=a+"";return a=f,b=parseInt(b,10)||80,c=c===!0||"true"===c||"byWord"===c,d=d||"...",a.length>b&&(c?(a=a.substring(0,b),f.charAt(b).match(/\s/)||(a=a.replace(/\s[^\s]*$/,""))):a=a.substring(0,b-d.length),e=!0),e&&(a+=d),a},a.trim=function(a){var b,c=/\s/;for(a=a.replace(/^\s\s*/,""),b=a.length;c.test(a.charAt(--b)););return a.slice(0,b+1)},a["default"]=function(b,c){return b=a.trim(b),b?b:c},a.dateformat=function(a,b){var c,d=puredom.i18n,e=puredom.date;return e&&e.create&&(c=e.create(a)),(!c||(c+"").indexOf("Invalid")>-1)&&(c=new Date(a),(!c||(c+"").indexOf("Invalid")>-1)&&(c=new Date,c.setTime(Math.round(a)))),b&&b.indexOf("%")>-1?e&&e.format&&(a=e.format(c,b)):d&&(a=d(c,null,null,{datetype:b||"date"})||c+""),a},a}(),parameterize:function(a,b){var c,d,e,f,g=[],h=puredom.extend({delimiter:"&",startDelimiter:"?",assignment:"=",typeHandlers:null},b);for(c in a)if(a.hasOwnProperty(c))if(d=a[c],f=this.typeOf(d),h.typeHandlers&&h.typeHandlers.hasOwnProperty(f))g.push(h.delimiter+encodeURIComponent(c)+"="+encodeURIComponent(h.typeHandlers[f](d)));else if("array"===f&&h.disableArrayParams!==!0)for(e=0;e<d.length;e++)g.push(h.delimiter+encodeURIComponent(c)+"[]="+encodeURIComponent(d[e]));else{switch(f){case"boolean":d=d?"true":"false";break;case"null":case"undefined":d="";break;case"object":d=h.useJsonForObjects!==!1?this.json(d):this.parameterize(d)}g.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return g=g.join(h.delimiter||"&"),g=(h.startDelimiter||"")+g},querystring:{parse:function(a){var b,c,d,e={};for("?"===a.substring(0,1)&&(a=a.substring(1)),b=a.split("&"),c=0;c<b.length;c++)b[c]&&(d=b[c].indexOf("="),e[decodeURIComponent(b[c].substring(0,d))]=0>d?"":decodeURIComponent(b[c].substring(d+1)));return e},stringify:function(a,b){return b=puredom.extend({startDelimiter:""},b||{}),puredom.parameterize(a,b)},build:function(){return puredom.querystring.stringify.apply(puredom.querystring,arguments)}},cookies:function(){var a={};return{set:function(b,c,d,e,f,g){var h,i="",j="";f="string"==typeof f?f:"",d&&(h=new Date,h.setTime(h.getTime()+1e3*60*60*24*d),i="; expires="+h.toGMTString()),a.hasOwnProperty(b)&&a[b].expires&&(i="; expires="+a[b].expires.toGMTString()),j=b+"="+encodeURIComponent(c)+i+"; path=/"+f.replace(/^\//,""),"string"==typeof e&&e.length>0&&(j+="; domain="+e.replace(/[\;\,]/,"")),g===!0&&(j+="; secure"),document.cookie=j,a[b]={value:c,expires:h}},get:function(b,c){if(a.hasOwnProperty(b)&&c!==!0)return a[b].value;var d,e,f=document.cookie.split(";");for(e=0;e<f.length;e++)if(d=f[e].replace(/^\s+/gim,""),0===d.indexOf(b+"="))return decodeURIComponent(d.substring(b.length+1,d.length));return null},remove:function(b){this.set(b,"",-1),delete a[b]},purge:function(){for(var b in a)a.hasOwnProperty(b)&&(this.remove(b),delete a[b])},read:function(){return this.get.apply(this,arguments)},write:function(){return this.set.apply(this,arguments)}}}(),Cache:function(){function a(){return this.constructor!==arguments.callee&&this.constructor!==a?new a:(this.data={},void 0)}return puredom.extend(a.prototype,{defaultType:"_default",purge:function(){this.data={}},get:function(a,b,c){var d;return 2===arguments.length&&(b=a,c=b,a=null),a=(a||this.defaultType)+"",b+="",d=this.data.hasOwnProperty(a)&&this.data[a][b]||!1,c?(d&&c(d),!!d):d},set:function(a,b,c){2===arguments.length&&(b=a,c=b,a=null),a=(a||this.defaultType)+"",b+="",this.data[a]||(this.data[a]={}),this.data[a][b]=c},proxySet:function(a,b,c,d){var e=this;return function(){e.set(a,b,arguments[d||0]),c&&c.apply(c,arguments)}},each:function(a){return puredom.foreach(this.data,a)}}),a}(),json:function(){var a=function(b){return"string"===puredom.typeOf(b)?a.parse(b):a.stringify(b)};return a.stringify=function(a){var b;try{b=JSON.stringify(a)}catch(c){puredom.log("puredom.json:: Stringify failed: "+c+" | "+a)}return b},a.parse=function(a){var b;if("string"==typeof a&&a.length>0)try{b=JSON.parse(a)}catch(c){puredom.log("puredom.json:: Parse failed: "+c+" | "+a)}return b},a.serialize=a.stringify,a.unserialize=a.parse,a}(),xml:{parse:function(a){var b;return window.DOMParser?b=(new window.DOMParser).parseFromString(a,"text/xml"):(b=new window.ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)),b}}}),puredom.EventEmitter=function(){this._eventRegistry=[]},puredom.EventEmitter.prototype.addEventListener=function(a,b){var c,d;if(a=(a+"").toLowerCase().replace(/\s+/gim,""),a.indexOf(",")>-1){for(c=a.split(","),d=0;d<c.length;d++)this.addEventListener(c[d],b);return this}return a=a.replace(/^on/,""),this._eventRegistry.push({type:a,handler:b}),this},puredom.EventEmitter.prototype.addListener=puredom.EventEmitter.prototype.addEventListener,puredom.EventEmitter.prototype.on=puredom.EventEmitter.prototype.addEventListener,puredom.EventEmitter.prototype.removeEventListener=function(a,b){var c,d,e,f;if(a=(a+"").toLowerCase().replace(/\s+/gim,""),a.indexOf(",")>-1){for(e=a.split(","),f=0;f<e.length;f++)this.removeEventListener(e[f],b);return this}for(a=a.replace(/^on/,""),c=this._eventRegistry.length;c--;)if(d=this._eventRegistry[c],d.type===a&&d.handler===b){this._eventRegistry.splice(c,1);break}return this},puredom.EventEmitter.prototype.removeListener=puredom.EventEmitter.prototype.removeEventListener,puredom.EventEmitter.prototype.fireEvent=function(a,b){var c,d,e,f=[],g=[];for(a=(a+"").toLowerCase().replace(/^on/,""),puredom.isArray(b)||(b=[b]),c=this._eventRegistry.length;c--&&(d=this._eventRegistry[c],d.type!==a||(0===g.length&&(g.falsy=g.falsey=g.truthy=!0),e=d.handler.apply(this,b),g.push(e),e===!0?g.falsy=g.falsey=!1:e===!1&&(g.truthy=!1),e!==!1)););return f=null,g},puredom.EventEmitter.prototype._fireEvent=puredom.EventEmitter.prototype.fireEvent,puredom.date={now:Date.now?function(){return Date.now()}:function(){return+new Date},create:function(a){var b;return a?(a=(a+"").replace(/^([0-9]{4})\-([0-9]{2})\-([0-9]{2})T([0-9]{2})\:([0-9]{2})\:([0-9]{2})\.[0-9]{3}Z$/,"$1/$2/$3 $4:$5:$6"),b=new Date(a)):b=new Date,b},parse:function(a,b){function c(a,b){(b===!1||b===!0)&&(i.pm=b===!0),(a||0===a)&&(i.hours=a),a=i.hours,i.hours<12&&i.pm&&(a-=12);var c=h.getDate();12===i.hours&&i.pm===!1?(0!==h.getHours()||"boolean"==typeof b)&&h.setHours(0):(h.setHours(a),h.setDate(c))}function d(a){return f[1](a),""}b=b||"%d/%m/%Y";var e,f,g,h=new Date(0),i={},j={H:[/^[0-9]{1,2}/g,function(a){a=Math.round(a),c(a)}],I:[/^[0-9]{1,2}/g,function(a){a=Math.round(a),c(a)}],p:[/^[AP]M/gi,function(a){c(null,"pm"===a.toLowerCase())}],M:[/^[0-9]{1,2}/g,function(a){h.setMinutes(Math.round(a))}],a:[/^(Mon|Tue(s?)|Wed|Thu|Fri|Sat|Sun)/i,function(){}],A:[/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday)/i,function(){}],d:[/^[0-9]{1,2}/g,function(a){i.date=Math.round(a),h.setDate(i.date)}],m:[/^[0-9]{1,2}/g,function(a){i.month=Math.round(a)-1,h.setMonth(i.month)}],B:[new RegExp("^("+this.months.join("|")+")","gi"),function(a){i.month=date._getMonthIndex(a),h.setMonth(i.month)}],b:[/^(Jan|Feb|Mar|Apr|May|Jun(e?)|Jul(y?)|Aug|Sep(t?)|Oct|Nov|Dec)/gi,function(a){i.month=date._getMonthIndex(a),h.setMonth(i.month)}],y:[/^[0-9]{2}/g,function(a){a=Math.round(a)+1900,1950>a&&(a+=100),h.setFullYear(a)}],Y:[/^[0-9]{4}/g,function(a){i.year=Math.round(a),h.setFullYear(i.year)}]};for(j.l=j.I,j.e=j.d,j.P=j.p,j.h=j.b,e=0;e<b.length;e++)if("%"===b.charAt(e)){f=null," "===a.charAt(0)&&"%"===b.charAt(e)&&(a=a.substring(1));for(g in j)if(j.hasOwnProperty(g)&&b.substring(e+1,e+1+g.length)===g){f=j[g],a=a.replace(f[0],d),e+=f.length-1;break}}else a.charAt(0)===b.charAt(e)&&(a=a.substring(1));return(i.month||0===i.month)&&h.setMonth(i.month),(i.year||0===i.year)&&h.setFullYear(i.year),h},unformat:function(){return this.parse.apply(this,arguments)},format:function(a,b){if(b=b||"%d/%m/%Y",!a||a.constructor!==Date||!a.toDateString)return!1;var c=a.toDateString();if(!c||"invalid date"===c.toLowerCase())return!1;if("NaN"===c)return!1;var d=c.split(" "),e=a.getHours(),f=(e+11)%12+1,g=a.getMonth()+1,h={H:e,I:(10>f?"0":"")+f,l:f,p:e>11?"PM":"AM",P:e>11?"pm":"am",M:(a.getMinutes()<10?"0":"")+a.getMinutes(),S:(a.getSeconds()<10?"0":"")+a.getSeconds(),a:d[0],A:this.weekdays[a.getDay()],d:d[2],e:Math.round(d[2]),m:(10>g?"0":"")+g,B:this.months[Math.round(d[1])],b:d[1],h:d[1],y:d[3].substring(2),Y:d[3]};return b.replace(/%[HIlpPMSaAdemBbhyY]/gm,function(a){var b=h[a.charAt(1)+""];return b||0===b||b===!1?b:a})},_getMonthIndex:function(a){a=a.substring(0,3).toLowerCase();for(var b=0;b<this.months.length;b++)if(this.months[b].substring(0,3).toLowerCase()===a)return b;return-1},weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]},puredom.net=puredom.extend(new puredom.EventEmitter,{HttpRequest:function(a){puredom.extend(this,a)},get:function(a,b,c){return this.request(puredom.extend({url:a,method:"GET"},c||{}),b)},post:function(a,b,c,d){return this.request(puredom.extend({url:a,method:"POST",body:b},d||{}),c)},multiLoad:function(a,b){if(!a)return!1;var c,d,e=-1,f=a.length,g=[],h=0,i=0;return c=function(f,j){if(f&&j){var k=a[e],l=j;k.process&&k.process.call&&(l=k.process(l),void 0===l&&(l=j)),g.push(l),b&&b(h>0,g,h,i),c=d=a=g=b=null}else d()},d=function(){e+=1;var g=a[e],h="string"==typeof g?{url:g}:g;h?http.request(h,c):f>e?d():b(!1,null,null,"No resources were available.")},d(),!0},request:function(a,b){function c(){var a,b,c,f,g=d.request,h={json:"JSON",document:"XML"},i=/^([a-z\-\.\_])\s*?\:/gim;if(4===g.readyState){for(e.fireEvent("before:response",d),d.status=g.status,d.responseType="text",d.responseText=d.response=g.responseText,d.responseHeaders={},i.lastIndex=0,a=g.getAllResponseHeaders();f=i.exec(a);)d.responseHeaders[f[1].toLowerCase()]=g.getResponseHeader(f[1]);if(d.contentTypeOverride)b=d.contentTypeOverride.toLowerCase();else{try{b=g.getResponseHeader("Content-Type").toLowerCase()}catch(j){}b=b||""}if(c=g.responseType)d.responseType=c,d.response=g.response,f="response"+(h[c]||c.charAt(0).toUpperCase()+c.substring(1)),d[f]=d.response;else if(b.match(/(^|\/)(json|javascript)$/gm)){d.responseType="json";try{d.response=d.responseJSON=JSON.parse(g.responseText.replace(/^[^\[\{]*(.*)[^\[\{]*$/g,"$1"))}catch(k){d.jsonParseError=k}}else("application/xml"===b||"xml"===b)&&(d.responseType="document",d.response=d.responseXML=g.responseXML);"function"==typeof d.callback&&d.callback(d.status<400,d.response,d)}}var d,e=this;return a=a||{},a.url?(!a.method&&a.type&&(a.method=a.type,console.warn("puredom.net.request: The `type` option is deprecated. Use `method`.")),!a.body&&a.post&&(a.body=a.post,console.warn("puredom.net.request: The `post` option is deprecated. Use `body`.")),d=new puredom.net.HttpRequest({url:a.url,type:a.method||(body?"POST":"GET"),callback:b||a.callback,body:a.body,headers:{"content-type":"application/x-www-form-urlencoded","x-requested-with":"XMLHttpRequest"}}),a.headers&&puredom.forEach(a.headers,function(a,b){d.headers[String(b).toLowerCase()]=String(a)}),a.contentTypeOverride&&(d.contentTypeOverride=a.contentTypeOverride,delete a.contentTypeOverride),a=b=null,this.createXHR(d,function(a){d.xhr=a,d.request=a,a.onreadystatechange=c,a.open(d.type,d.url,d.async!==!1),puredom.forEach(d.headers,function(b,c){a.setRequestHeader(c,b)}),!d.bodySerialized&&d.body&&"object"===puredom.typeOf(d.body)&&e.serializeRequestBody(d),a.send(d.bodySerialized||d.body||null)}),d):!1},requestSerializers:{json:puredom.json,xml:puredom.xml,"form-encoded":puredom.querystring},serializeRequestBody:function(a){var b=(a.headers["content-type"]||"application/x-www-form-urlencoded").toLowerCase();puredom.forEach(this.serializers,function(c,d){return b.indexOf(d)>-1?(a.bodySerialized=(c.stringify||c.encode||c)(a.body),!1):void 0})},createXHR:function(a,b,c){var d;if(c=c||window,c.XMLHttpRequest)d=new c.XMLHttpRequest;else try{d=new c.ActiveXObject("Msxml2.XMLHTTP")}catch(e){d=new c.ActiveXObject("Microsoft.XMLHTTP")}return b(d),d}}),puredom.net.jsonp=function(){var a=function(){return a.get.apply(a,arguments)},b=0;return a.get=function(a,c,d){var e,f,g,h;return"function"===puredom.typeOf(c)&&(d&&"object"===puredom.typeOf(d)&&(h=d),d=c,h&&(c=h)),c=c||{},c.callback&&!d&&(d=c.callback),c.timeout||(c.timeout=10),(a=a||c.url)?(c.params&&puredom.parameterize&&(a+=(a.indexOf("?")>-1?"&":"?")+puredom.querystring.stringify(c.params)),b+=1,c.callback=g="puredom_net_jsonp_"+b,function(){window[c.callback]=function(a){var b;if(d){try{d(a)}catch(c){b=c}d=null}if(f&&(f.stop(),f=null),b)throw b}}(),a.indexOf("{!callback}")>-1?a=a.replace("{!callback}",g):a+=(a.indexOf("?")<0?"?":"&")+encodeURIComponent(c.callbackParam||"callback")+"="+encodeURIComponent(g),this._head||(h=document.getElementsByTagName("head"),this._head=h&&h[0]),e=puredom.el({type:"script",attributes:{src:a,async:"async",type:"text/javascript"},parent:this._head||document.body}),f={id:g,stop:function(){f._timer&&clearTimeout(f._timer),window[g]=null;
try{delete window[g]}catch(a){}d=null,e.attr("src","about:blank").remove(),g=f=e=null}},c.timeout&&c.timeout>0&&(f._timer=setTimeout(function(){d&&d({_requestTimedOut:!0,_jsonpTimedout:!0,success:!1,result:!1}),f&&f.stop()},Math.round(1e3*c.timeout))),a=c=h=null,f):!1},a}(),puredom.LocalStorage=function(a,b,c){var d=this;"function"==typeof arguments[2]&&(b=arguments[2],c=arguments[1]),c=c||{},this.id=a,this.adapter=null,this.data={},c.adapter&&this.setAdapter(c.adapter),this.adapter||c.useBest===!1||this.useBestAdapter(),this.adapter&&c.restore!==!1?this.restore(function(){b&&b(d),d=c=null}):b&&(b(d),d=null)},puredom.LocalStorage.prototype.commitDelay=100,puredom.LocalStorage.prototype.data={},puredom.LocalStorage.prototype.setAdapter=function(a){var b,c=this.constructor.adapters,d=(a+"").toLowerCase(),e=!1,f=!1;for(b in c)if(c.hasOwnProperty(b)&&(b+"").toLowerCase()===d&&(e=!0,c[b].test(this)===!0)){f=!0,this.adapterName=a,this.adapter=c[b];break}return e?f?!0:(puredom.log('puredom.LocalStorage :: "'+a+'" adapter test() failed: conditions for adapter use not met.'),!1):(puredom.log('puredom.LocalStorage :: Could not find "'+a+'" adapter.'),!1)},puredom.LocalStorage.prototype.getAdapter=function(){return this.adapterName},puredom.LocalStorage.prototype.useBestAdapter=function(){var a,b,c,d=this.constructor.adapters;for(c in d)d.hasOwnProperty(c)&&"none"!==c&&d[c].test(this)===!0&&(!a||(Math.round(a.rating)||0)<(Math.round(d[c].rating)||0))&&(a=d[c],b=c);return a?(this.adapterName=b,this.adapter=a,!0):(setTimeout(function(){throw"puredom.LocalStorage :: Could not find the best adapter."},1),!1)},puredom.LocalStorage.prototype.getNamespace=function(a){var b,c=this;return a+="","."===a.substring(0,1)&&(a=a.substring(1)),"."===a.substring(a.length-1)&&(a=a.substring(0,a.length-1)),b=puredom.extend(new puredom.LocalStorage.NamespacedLocalStorage,{getAdapter:function(){return c.getAdapter()},getNamespace:this.getNamespace,getValue:function(b){return c.getValue(a+"."+b)},setValue:function(b,d){return c.setValue(a+"."+b,d),this},removeKey:function(b){return c.removeKey(a+"."+b),this},purge:function(){return c.removeKey(a),this},getData:function(){return c.getValue(a)},restore:function(a){var b,d=this;return a&&(b=function(){a(d),d=b=a=null}),c.restore(b),this},commit:function(a){var b,d=this;return a&&(b=function(){a(d),d=b=a=null}),c.commit(b),this}}),puredom.extend(b,{get:b.getValue,set:b.setValue,remove:b.removeKey}),b},puredom.LocalStorage.prototype.getData=function(){return this.data},puredom.LocalStorage.prototype.getValue=function(a){var b=puredom.delve(this.data,a);return b},puredom.LocalStorage.prototype.setValue=function(a,b){var c,d=this.data,e=a.split(".");for(c=0;c<e.length-1;c++)d.hasOwnProperty(e[c])||(d[e[c]]={}),d=d[e[c]];return void 0===b||null===b?(d[e[e.length-1]]=null,delete d[e[e.length-1]]):d[e[e.length-1]]=b,this.queueCommit(),this},puredom.LocalStorage.prototype.removeKey=function(a){return this.setValue(a,void 0),this},puredom.LocalStorage.prototype.get=puredom.LocalStorage.prototype.getValue,puredom.LocalStorage.prototype.set=puredom.LocalStorage.prototype.setValue,puredom.LocalStorage.prototype.remove=puredom.LocalStorage.prototype.removeKey,puredom.LocalStorage.prototype.purge=function(){return this.data={},this.queueCommit(),this},puredom.LocalStorage.prototype.restore=function(a){var b,c,d=this;return b=this._adapterCall("load",function(b){d.data=c=b||{},a&&a(d),d=null}),b&&!c&&(this.data=b,a&&a(this)),b=c=null,this},puredom.LocalStorage.prototype.commit=function(a){var b=this;return this._commitTimer&&(clearTimeout(this._commitTimer),this._commitTimer=null),this._adapterCall("save",this.data,function(){a&&a(b),b=null}),this},puredom.LocalStorage.prototype.queueCommit=function(){var a=this;this._commitTimer||(this._commitTimer=setTimeout(function(){a.commit(),a=null},this.commitDelay))},puredom.LocalStorage.prototype._adapterCall=function(a){return this.adapter&&this.adapter[a]?this.adapter[a].apply(this.adapter,[this].concat(puredom.toArray(arguments).slice(1))):void 0},puredom.LocalStorage.NamespacedLocalStorage=function(){},puredom.LocalStorage.adapters={},puredom.LocalStorage.addAdapter=function(a,b){if(!b.save)throw'puredom.LocalStorage :: Adapter "'+a+'" attempted to register, but does not provide a save() method.';if(!b.load)throw'puredom.LocalStorage :: Adapter "'+a+'" attempted to register, but does not provide a load() method.';this.adapters[a]=b},puredom.LocalStorage.adapters.none=function(){},puredom.extend(puredom.LocalStorage.adapters.none.prototype,{defaultName:"db",rating:0,test:function(){return!1},load:function(a,b){b&&b()},save:function(a,b,c){c&&c(!1)}}),puredom.LocalStorage.addAdapter("CookieAdapter",{defaultName:"db",rating:5,test:function(){return puredom.cookies&&puredom.cookies.get&&"cookie"in document?!0:!1},load:function(a,b){var c,d=puredom.cookies.get(a.id||this.defaultName);return d&&(c=puredom.json(d)),b&&b(c),c},save:function(a,b,c){puredom.cookies.set(a.id||this.defaultName,puredom.json(b)),c&&c(!0)}}),puredom.LocalStorage.addAdapter("LocalStorageAdapter",{defaultName:"db",rating:60,test:function(){var a,b="localStorage"in window&&"function"==typeof window.localStorage.hasOwnProperty,c=puredom.json({a:"a",b:4/3,c:!0,d:null});if(b)try{a=localStorage.__test,localStorage.__test=c,localStorage.__test!==c&&(b=!1),localStorage.__test=a,void 0===a&&delete localStorage.__test}catch(d){b=!1}return b},load:function(a,b){var c,d=this._getKey(a);return localStorage.hasOwnProperty(d)&&(c=puredom.json.parse(localStorage[d])),b&&b(c),c},save:function(a,b,c){var d=this._getKey(a);return void 0===b?delete localStorage[d]:localStorage[d]=puredom.json.stringify(b),c&&c(!0),!0},_getKey:function(a){return(a.id||this.defaultName||"")+""}}),puredom.LocalStorage.addAdapter("UserDataAdapter",{defaultName:"db",rating:20,test:function(){return/\bMSIE\s[1-6](\.[0-9]*)?/gim.test(navigator.userAgent+"")?!1:"undefined"!=typeof document.body.addBehavior},load:function(a,b){var c,d,e=this._getKey(a),f=this._getStore(e);return f&&(c=f.getAttribute("puredomlocalstorage")),c&&(d=puredom.json.parse(c)),b&&b(d),d},save:function(a,b,c){var d=this._getKey(a),e=this._getStore(d),f="puredomlocalstorage",g=!1;return e&&"save"in e&&(void 0===b?e.removeAttribute?e.removeAttribute(f):e.setAttribute(f,""):e.setAttribute(f,puredom.json.stringify(b)),e.save(d),g=!0),c&&c(g),g},_getStore:function(a){var b;return this.stores||(this.stores={}),b=this.stores[a],b||(b=this.stores[a]=document.getElementById(a),b||(b=this.stores[a]=document.createElement("span"),b.style.position="absolute",b.style.top="-100px",b.style.left="0",b.style.behavior="url('#default#userData')",document.body.appendChild(b))),"true"!==b.getAttribute("data-tdlsud-loaded")&&(b.setAttribute("data-tdlsud-loaded","true"),b.load(a)),b},_getKey:function(a){return"ieud"+(a.id||this.defaultName||"")}});