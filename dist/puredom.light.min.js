/*! puredom light 09-12-2014 */
!function(a,b){function c(a){var b=a,c=q[a];return c?c:(h&&a.substring(0,h.length)!==h&&(c=h+a.charAt(0).toUpperCase()+a.substring(1),c in d.body.style&&(b=c)),q[a]=b,b)}"object"==typeof process&&process.argv&&"node"===process.argv[0]&&(a=require("jsdom").jsdom().parentWindow);var d=a.document,e=a.navigator,f=a.puredom;"function"!=typeof Date.now&&(Date.now=function(){return(new Date).getTime()});var g,h,i,j,k=function(){return o.puredom.apply(o,arguments)},l={version:"1.3.0",templateAttributeName:"data-tpl-id",baseAnimationInterval:20,allowCssTransitions:!0,easingMethods:{ease:function(a){return(Math.sin(a*Math.PI-Math.PI/2)+1)/2},"ease-in-out":function(a){return(Math.sin(a*Math.PI-Math.PI/2)+1)/2},"ease-in-out-2":function(a){return this["ease-in-out"](this["ease-in-out"](a))},"ease-in-out-3":function(a){return this["ease-in-out"](this["ease-in-out"](this["ease-in-out"](a)))}}},m=!1,n=l.constructor,o={oninit:[],animationTimes:{fast:150,medium:450,slow:1e3},animationTimeScale:1,registeredEventCount:0,html5elements:"abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video".split(" "),support:{html5:!0,querySelectorAll:!!("querySelectorAll"in d),filters:!1,webkitMultitouch:"createTouch"in d&&0!==e.maxTouchPoints},regex:{css3AutoPrefix:/([\s\;\/\*])(transform|transition|perspective|box\-sizing|box\-shadow|border\-radius)\:([^\;]*)(\;|$)/gim,css3VendorPrefix:/\b\-(moz|webkit|ms|o|vendor)\-/gim,templateFieldToken:/([^\\]?)\{([a-z0-9A-Z\$_\.]+)(\|[^\}]*?)?\}/gm,parseObjectNameFromString:/^\[object ([^\s]+)\]$/gim,autoDetectHTMLContent:/(<[a-z]|&[a-z#0-9]{1,10};)/gim,whitespaceCharacters:/\s/,getNumericCSSValue:/[^0-9\.\-]/gm,getCSSValueUnits:/([a-z]+|%)$/,getNonIntegerCharsSigned:/[^0-9\.\-]/gm,getUpperCaseAlphaChars:/[A-Z]/gm},noop:function(){}};if(e.userAgent.match(/\b(webkit|applewebkit|chrome|chromium|khtml)\b/gim)?(g="-webkit",h="Webkit"):e.userAgent.match(/\bopera\b/gim)?(g="-o",h="O"):e.userAgent.match(/\bgecko\b/gim)?(g="-moz",h="Moz"):e.userAgent.match(/\bmsie\s*?(8|9|[1-9][0-9]+)\b/gim)?(g="-ms",h="Ms"):e.userAgent.match(/\bmsie\s*?[4-8]\b/gim)&&(o.support.filters=!0,o.support.filterProperty="filter"),function(a,b){if(a=d.createElement("div"),a.innerHTML="<nav></nav>",o.support.html5=a.childNodes.length>0,!o.support.html5){for(o.html5frag=d.createDocumentFragment(),b=o.html5elements.length;b--;)o.html5frag.createElement(o.html5elements[b]);o.html5div=d.createElement("div"),o.html5frag.appendChild(o.html5div)}}(),j=function(){var a=d.body;return i=void 0!==a.textContent&&"textContent"||a.innerText&&"innerText"||"innerHTML",j=null,i},k.extend=function(a){var b,c,d;for(a=a||{},b=1;b<arguments.length;b++)if(d=arguments[b]){for(c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);"function"==typeof d.toString&&d.toString!==Object.prototype.toString&&(a.toString=d.toString)}return a},k.mixin=function(a){var b,c,d,e=Array.prototype.slice.call(arguments,1);for(a===!0&&(a=e.pop()),a=a||{},b=0;b<e.length;b++)if(d=e[b])for(c in d)d.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=d[c]);return a},k.strip=function(a,b){for(var c in a)(b===!0||a.hasOwnProperty(c))&&(a[c]=null)},k.delve=function(a,b,c,d){var e=0;for(b=b.split("."),c===!0&&b.splice(0,1);e<b.length&&a&&a.hasOwnProperty(b[e]);)a=a[b[e]],e+=1;return e>=b.length||d===!0&&e>0?a:void 0},k.flattenObj=function(a,b,c,d){var e,f;b=b||"",c=c||0,d=d||{};for(e in a)a.hasOwnProperty(e)&&(f=b?b+"_"+e:e,k.isScalar(a[e])?d[f]=a[e]:k.flattenObj(a[e],f,c+1,d));return c?void 0:d},k.template=function(a,b,c){var d,e;return c!==!1&&k.i18n&&(e=k.i18n),d=(a+"").replace(o.regex.templateFieldToken,function(a,c,d,f){var g;return"\\"!==c&&d?(g=k.delve(b,d),g?(e&&(g=e(g)||g),f&&"|"===f.substring(0,1)&&(g=k.text.filter(g,f.substring(1))),a=c+g):a=c):a=c,a})},k.inherits=function(a,b){function c(){}c.prototype=b.prototype;var d=a.prototype;a.prototype=new c,puredom.extend(a.prototype,d),a.prototype.constructor=a,a.prototype.__super=b},k.typeOf=function(a){if(void 0===a)return"undefined";if(null===a)return"null";if(a){if(a.constructor===n)return"object";if(k.isArray(a))return"array"}return Object.prototype.toString.call(a).replace(o.regex.parseObjectNameFromString,"$1").toLowerCase()},k.isScalar=function(a){var b=k.typeOf(a);return"undefined"===b||"null"===b||"number"===b||"string"===b||"boolean"===b?!0:!1},!Array.prototype.indexOf||0!==[k].indexOf(k))try{Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}}catch(p){}k.toArray=function(a){var b,c=[],d=a&&a.length;if(d||0===d)for(b=d;b--;)c[b]=a[b];else for(b=0;;){if(a.hasOwnProperty&&a.hasOwnProperty(b))c.push(a[b]);else{if(!a.hasOwnProperty||!a.hasOwnProperty(b+""))break;c.push(a[b+""])}b+=1}return c},k.isArray=Array.isArray?function(a){return Array.isArray(a)}:function(a){return"[object Array]"===Object.prototype.toString.call(a)},k.hasOwnProp=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},k.forEach=function(a,b){var c,d;if(k.isArray(a))for(c=0;c<a.length&&(d=b(a[c],c),d!==!1);c++);else for(c in a)if(a.hasOwnProperty(c)&&(d=b(a[c],c),d===!1))break;return a},k.foreach=k.forEach,k.setInnerHTML=function(a,b){var c,e;if(o.support.html5)a.innerHTML=b||"";else{for(a.innerHTML="",o.html5div.innerHTML=b||"",c=d.createDocumentFragment(),e=o.html5div.childNodes.length;e--;)c.appendChild(o.html5div.firstChild);a.appendChild(c)}},k.createElement=function(a,b){var c,e,f,h,i;if("string"==typeof a){for(h=d.createElement("div"),h.innerHTML=a,f=0;f<h.childNodes.length;f++)c=h.childNodes[f],1===c.nodeType&&b&&b.appendChild(c);return c}a=a||{},c=d.createElement(a.type||"div"),b=b||a.parent,a.insertBefore&&a.insertBefore.constructor===k.NodeSelection&&(a.insertBefore=a.insertBefore._nodes[0]),!b&&a.insertBefore&&(b=a.insertBefore.parentNode);for(e in a)if(k.hasOwnProp(a,e))if("on"===(e+"").substring(0,2).toLowerCase())k.addEvent(c,e.substring(2),a[e]);else if("css"===e||"cssText"===e)g?(a[e]=a[e].replace(o.regex.css3AutoPrefix,"$1"+g+"-$2:$3; $2:$3;"),a[e]=a[e].replace(o.regex.css3VendorPrefix,"-"+g+"-"),c.style.cssText=a[e]):c.style.cssText=a[e];else if("html"===e||"innerHTML"===e)k.setInnerHTML(c,a[e]);else if("attributes"===e)for(f in a[e])k.hasOwnProp(a[e],f)&&c.setAttribute(f,a[e][f]);else if("parent"!==e&&"children"!==e&&"insertBefore"!==e&&"type"!==e&&"children"!==e&&"html"!==e&&"innerHTML"!==e)if(d.all)try{c[e]=a[e]}catch(j){k.log(e)}else c[e]=a[e];if(b){if(a.insertBefore)try{b.insertBefore(c,a.insertBefore),i=!0}catch(j){i=!1}i||b.appendChild(c)}if(a.children&&k.isArray(a.children)){for(h=d.createDocumentFragment(),e=0;e<a.children.length;e++)k.createElement(a.children[e],h);c.appendChild(h)}return c},k.NodeSelection=function s(a){var b;if(this._results=[],this._animations=[],a)if(k.isArray(a))for(this._nodes=a=a.slice(),b=a.length;b--;)a[b]?a[b]instanceof s&&(a=a.concat(a.splice(b,1)[0]._nodes)):a.splice(b,1);else this._nodes=[a];else this._nodes=[]},k.extend(k.NodeSelection.prototype,{_results:[],_nodes:[],_animations:[],describe:function(){var a=[];return this.each(function(b){var c="<"+b.nodeName(),d=b.prop("id"),e=b.prop("className");d&&(c+=' id="'+d+'"'),e&&(c+=' class="'+e+'"'),c+=">",c+=1===b._nodes[0].childNodes.length&&3===b._nodes[0].childNodes[0].nodeType?b.text().replace(/(\r|\n)/gim,decodeURIComponent("%E2%86%A9")).replace(/\t/gim,decodeURIComponent("%E2%86%92")):"["+b.children().count()+" children]",c+="</"+b.nodeName()+">",a.push(c)}),a},toString:function(){return this.describe().join(", ")},toSource:function(){return this._nodes},getResult:function(a){return a=Math.round(a)||0,this._results[this._results.length-a-1]},pushResult:function(a){return this._results.push(a),this},each:function(a){return this._each(a,!0)},_each:function(a,b,c){var d,e,f,g,h=this._nodes.slice(0,this._nodes.length);for(d=0;d<h.length&&(e=d,c===!0&&(e=h.length-e-1),f=h[e],b===!0&&(f=new k.NodeSelection(f)),g=a.call(this,f,e),g!==!1);d++);return this},wait:function(a,b){var c=this;return b&&setTimeout(function(){b.apply(c),c=b=null},Math.abs(a)),this},nodeName:function(){var b=this._nodes[0],c=b&&b.nodeName&&b.nodeName.toLowerCase();return b===a?"#window":c?c:null},uuid:function(){return this._nodes[0]&&o.nodeToId(this._nodes[0])||null},text:function(a){return 0===arguments.length?this._nodes[0]&&this._nodes[0][i||j()]||"":(a+="",this._each(function(b){b[i||j()]=a}),this)},html:function(a,b){return 0===arguments.length?this._nodes[0]&&this._nodes[0].innerHTML||"":(a+="",o.regex.autoDetectHTMLContent.lastIndex=0,this._each(o.regex.autoDetectHTMLContent.test(a)&&b!==!0?function(b){k.setInnerHTML(b,a)}:function(b){b[i||j()]=a}),this)},css:function(a,b,c){var d,e=this;if(b=b||{},("string"==typeof b||"number"==typeof b)&&(b={tween:b}),!c&&b.callback&&(c=b.callback),c&&c.call||(c=o.noop),d=k.typeOf(b.tween),"string"==typeof a&&(a=o.parseCSS(a)),"string"===d&&"none"!==b.tween||"number"===d&&b.tween>0){var f,g,h=(b.tween+"").replace(o.regex.whitespaceCharacters,"").split(","),i=0,j=0;g=function(a){j+=1,j>=i&&(g=null,c&&c.call(e,e),e=c=a=null)};for(f in a)a.hasOwnProperty(f)&&(i+=1,this.animateCss(f,a[f],h[0],h[1],g))}else this._each(function(b){k.applyCss(b,a)}),c?setTimeout(function(){c.call(e,e),e=c=null},1):e=null;return this},show:function(){return this.css({display:"",visibility:"visible"}),this._each(function(a){("none"===a.style.display||"none"===k.nodeStyle(a,"display"))&&(a.style.display="block")}),this},hide:function(a){return this.css(a===!1?{visibility:"hidden"}:{display:"none"})},fadeIn:function(a,b){var c=parseFloat(this.getStyle("opacity")||"0")||0,d=1;return("none"===this.getStyle("display")||"hidden"===this.getStyle("visibility"))&&(this.getStyle("opacity")&&c>0&&1>c&&(d=c),c=0,this.css({opacity:0})),"function"===k.typeOf(a)&&(b=a,a=arguments[1]),c>=1||0===a||a===!1?(this.css({opacity:d}).show(),b&&b.call&&setTimeout(b,0),this):(this.css({opacity:d},{tween:a||"medium",callback:function(c){b&&b(c),a=b=null}}).show(),this)},fadeOut:function(a,b,c){var d=parseFloat(this.getStyle("opacity")||"1")||1;return"function"===k.typeOf(a)&&(b=a,a=arguments[1]),"boolean"===k.typeOf(b)&&(c=b,b=null,"function"===k.typeOf(arguments[2])&&(b=arguments[2])),0>=d||"none"===this.getStyle("display")||"hidden"===this.getStyle("visibility")||0===a||a===!1?(this.css({opacity:0}).hide(c),setTimeout(b,0),this):(this.css({opacity:0},{tween:a||"medium",callback:function(e){e.hide(c).css({opacity:d}),b&&b(e),a=b=null}}),this)},animateCSS:function(){var a,b,c,e;return a=function(a,b,c,d,e){var f,g,h,i=[],j=[];return a=a.toLowerCase(),"auto"!==b?(f=parseFloat((b+"").replace(o.regex.getNumericCSSValue,""))||0,h="string"===k.typeOf(b)&&b.match(o.regex.getCSSValueUnits),g=h&&h[0]||"px","opacity"===a&&(g="")):g="opacity"===a?"":"px",this._each(function(c,d){var e,h,l,m,n={};i[d]=parseFloat((k.nodeStyle(c,a)+"").replace(o.regex.getNonIntegerCharsSigned,""))||0,"auto"===b||""===b?(m=c.style.visibility||"",n[a]=b,n.visibility="hidden",k.applyCss(c,n),e=k.nodeStyle(c,a),(e===b||e.indexOf("px")<e.length-3)&&(l=a.substring(0,1).toUpperCase()+a.substring(1).toLowerCase(),e=c["offset"+l]+"px"),h="string"===k.typeOf(e)&&e.match(o.regex.getCSSValueUnits),j[d]={_actualTarget:b,numericTargetValue:parseFloat((e+"").replace(o.regex.getNumericCSSValue,""))||0,units:"opacity"===a?"":h&&h[0]||"px"},setTimeout(function(){c.style.visibility=m,c=null},51),n=e=h=null):j[d]={numericTargetValue:f,units:g}}),this.animate(function(b){this._each(function(c,d){var e,f={},g=b*(j[d].numericTargetValue-i[d])+i[d],h=j[d].units;"px"===h?g=Math.round(g):(e=parseFloat(g),g=e%1===0?Math.round(e):e.toFixed(2)),f[a]=g+h,k.applyCss(c,f)})},c,d,function(b){b._each(function(b,c){var d={};j[c]._actualTarget&&(d[a]=j[c]._actualTarget,k.applyCss(b,d))}),e.apply(b,arguments)})},b=function(a,b,c,d,e){var f=this._createAnimationObj(function(){},c,d,e),g=this,h={},i={};a=k.getStyleAsProperty(a),"number"===k.typeOf(b)&&"opacity"!==(a+"").toLowerCase()&&(b+="px"),h[k.getStyleAsCSS(a)]={duration:f.duration,timingFunction:f.easing},i[a]=b,setTimeout(function(){g._each(function(a){k.updateCssTransitions(a,h),k.applyCss(a,i),o.incrementAnimationCount(a)}),f._cb=function(){if(f){var b={};b[a]=null,g._each(function(a){k.updateCssTransitions(a,b),o.decrementAnimationCount(a)}),f.callback&&f.callback.call(g,g);for(var c in f)if(f.hasOwnProperty(c))try{delete f[c]}catch(d){}}f=i=e=g=null},setTimeout(f._cb,(parseInt(f.duration,10)||0)+20)},10)},e=function(){return c=void 0!==d.body.style[h+"Transition"]||void 0!==d.body.style.transition},function(){var d=!1;return"boolean"!==k.typeOf(c)&&e(),k.allowCssTransitions===!1&&d!==!0||!c?a.apply(this,arguments):b.apply(this,arguments),this}}(),animate:function(a){if(a){var b,c=this,d=this._createAnimationObj.apply(this,arguments);this._each(function(a){o.incrementAnimationCount(a)}),b=function(a){if(d.frameTime=a,d.position=d.frameTime-d.start,d.fraction=d.position/d.duration,d.position>=d.duration?(d.fraction=1,d.position=d.duration):d.easingMethod&&(d.fraction=d.easingMethod.call(k.easingMethods,d.fraction,d)),d.animator.call(c,d.fraction,d),1===d.fraction){for(var e=c._animations.length;e--;)if(c._animations[e]===d){c._animations.splice(e,1);break}d.callback&&setTimeout(function(){c._each(function(a){o.decrementAnimationCount(a)}),d.callback.call(c,c,d),c=d=null},10)}else d.timer=k.animationFrame.getTimer(b,k.baseAnimationInterval||10)},k.animationFrame.getTimer(b,k.baseAnimationInterval||10),this._animations.push(d)}return this},_createAnimationObj:function(a,b,c,d){var e={animator:a,duration:b,easing:"string"===k.typeOf(c)?c:"ease",callback:d,start:k.animationFrame.getStartTime(),frameTime:null};if("string"===k.typeOf(e.duration))switch(e.duration.toLowerCase()){case"long":case"slow":e.duration=o.animationTimes.slow;break;case"short":case"fast":e.duration=o.animationTimes.fast;break;default:e.duration=parseInt(e.duration,10)||o.animationTimes.medium}else e.duration=Math.round(e.duration)||o.animationTimes.medium;return o.animationTimeScale&&(e.duration*=o.animationTimeScale),e.easing&&k.easingMethods.hasOwnProperty(e.easing)?e.easingMethod=k.easingMethods[e.easing]:e.easing=null,e},classify:function(){var a,b,c=[],d="{*^de^*}"===arguments[0]?"removeClass":"addClass";for(a=0;a<arguments.length;a++)if(k.isArray(arguments[a]))for(b=0;b<arguments[a].length;b++)c.push(arguments[a][b]);else c.push(arguments[a]);return this._each(function(a){k[d](a,c)}),this},declassify:function(){var a=["{*^de^*}"].concat(Array.prototype.slice.call(arguments,0));return this.classify.apply(this,a)},hasClass:function(a,b){var c=b!==!0;return this._each(function(d){var e=(" "+d.className+" ").indexOf(" "+a+" ")>-1;b===!0?e&&(c=!0):e||(c=!1)}),c},setOpacity:function(a){return this._each(function(b){k.setOpacity(b,a)}),this},sumOf:function(a){var b=0,c=Array.prototype.slice.call(arguments,1);return this.constructor.prototype.hasOwnProperty(a)&&this._each(function(d){d=new k.NodeSelection(d),b+=d[a].apply(d,c)}),b},height:function(a,b){var c,d,e=0;return"object"!==k.typeOf(a)||b||(b=a,a=null),b=b||{},a||0===a?(a+="","auto"===a?c="":(d=/^([\-0-9\.]+)(.*?)$/.exec(a),a=Math.round(d&&d[1]||a)||0,c=d&&d[2]||"px"),this.css({height:a+c}),this):(this._each(function(a){e+=parseInt(a.offsetHeight,10)||0,b.border!==!0&&(e-=parseInt((k.nodeStyle(a,"border-top-width")+"").replace(o.regex.getNonIntegerCharsSigned,""),10)||0,e-=parseInt((k.nodeStyle(a,"border-bottom-width")+"").replace(o.regex.getNonIntegerCharsSigned,""),10)||0),b.margin===!0&&(e+=parseInt((k.nodeStyle(a,"margin-top")+"").replace(o.regex.getNonIntegerCharsSigned,""),10)||0,e+=parseInt((k.nodeStyle(a,"margin-bottom")+"").replace(o.regex.getNonIntegerCharsSigned,""),10)||0),b.padding===!1&&(e-=parseInt((k.nodeStyle(a,"padding-top")+"").replace(o.regex.getNonIntegerCharsSigned,""),10)||0,e-=parseInt((k.nodeStyle(a,"padding-bottom")+"").replace(o.regex.getNonIntegerCharsSigned,""),10)||0)}),e)},width:function(a,b){var c,d,e=0;return"object"!==k.typeOf(a)||b||(b=a,a=null),b=b||{},a||0===a?(a+="","auto"===a?c="":(d=/^([\-0-9\.]+)(.*?)$/.exec(a),a=d&&d[1]||a,c=d&&d[2]||"px"),this.css({width:a+c}),this):(this._each(function(a){e+=parseInt(a.offsetWidth,10)||0,b.border!==!0&&(e-=parseInt((k.nodeStyle(a,"border-left-width")+"").replace(o.regex.getNonIntegerCharsSigned,""),10)||0,e-=parseInt((k.nodeStyle(a,"border-right-width")+"").replace(o.regex.getNonIntegerCharsSigned,""),10)||0),b.margin===!0&&(e+=parseInt((k.nodeStyle(a,"margin-left")+"").replace(o.regex.getNonIntegerCharsSigned,""),10)||0,e+=parseInt((k.nodeStyle(a,"margin-right")+"").replace(o.regex.getNonIntegerCharsSigned,""),10)||0),b.padding===!1&&(e-=parseInt((k.nodeStyle(a,"padding-left")+"").replace(o.regex.getNonIntegerCharsSigned,""),10)||0,e-=parseInt((k.nodeStyle(a,"padding-right")+"").replace(o.regex.getNonIntegerCharsSigned,""),10)||0)}),e)},x:function(a){var b=this._nodes[0],c=null;if(b&&(c=b.offsetLeft,a===!0))for(;(b=b.parentNode)&&b!==d;)c+=parseFloat(b.offsetLeft)||0;return c},y:function(a){var b=this._nodes[0],c=null;if(b&&(c=b.offsetTop,a===!0))for(;(b=b.parentNode)&&b!==d;)c+=parseFloat(b.offsetTop)||0;return c},position:function(a,b,c,d){var e;return d=d||"px",arguments.length<1||1===arguments.length&&arguments[0]===!0?{x:this.x(arguments[0]===!0),y:this.y(arguments[0]===!0)}:(e={},"number"===puredom.typeOf(a)?e.left=a+d:"string"===puredom.typeOf(a)&&(e.left=a),"number"===puredom.typeOf(b)?e.top=b+d:"string"===puredom.typeOf(b)&&(e.top=b),this.css(e,c),this)},scrollLeft:function(a){return a||0===a?("number"!==k.typeOf(a)&&(a=Math.round((a+"").replace(o.regex.getNonIntegerCharsSigned,""))),void this._each(function(b){b.scrollLeft=a})):this._nodes&&this._nodes[0]&&this._nodes[0].scrollLeft||0},scrollTop:function(a){return a||0===a?("number"!==k.typeOf(a)&&(a=Math.round((a+"").replace(o.regex.getNonIntegerCharsSigned,""))),void this._each(function(b){b.scrollTop=a})):this._nodes&&this._nodes[0]&&this._nodes[0].scrollTop||0},focus:function(){return this._each(function(a){a.focus&&a.focus()}),this},blur:function(){return this._each(function(a){a.blur&&a.blur()}),this},selectAll:function(){this._each(function(a){a.SelectAll&&a.SelectAll(),a.select&&a.select(),a.selectionStart&&a.hasOwnProperty("value")&&(a.selectionStart=0,a.selectionEnd=a.value.length)})},getStyle:function(a,b){var c=[];return this._each(function(b){c.push(k.nodeStyle(b,a)||null)}),b===!1?(this.pushResult(c),this):c.length<=1?c[0]:c},value:function(a,b){if(b=b||{},null!==a&&void 0!==a&&arguments.length>0)return this._each(function(c){var d=(c.nodeName+"").toLowerCase(),e=(c.getAttribute("type")||"").toLowerCase();"input"!==d||"checkbox"!==e&&"radio"!==e?c.value=a:c.checked=!!a,b.fireChange!==!1&&k.fireEvent({type:"change",target:c,value:a})}),this;var c=[];return this._each(function(a){var b,d=(a.nodeName+"").toLowerCase(),e=(a.getAttribute("type")||"").toLowerCase();"input"!==d||"checkbox"!==e&&"radio"!==e?"select"===d?(b=a.multiselect||a.multiSelect?[]:null,k.el(a).query("option")._each(function(a){(a.selected||a.checked)&&(k.isArray(b)?b.push(a.value):b=a.value)}),c.push(b)):c.push(a.value):c.push(!!a.checked)}),c.length<2?c[0]:c},attr:function(a,b,c){var d,e,f=[];if(0===arguments.length){for(f={},d=this._nodes[0].attributes.length;d--;)e=this._nodes[0].attributes[d],e.specified&&(f[e.name||e.nodeName]=e.value||e.nodeValue);return f}if(arguments.length>1){if("object"===k.typeOf(a)){for(d in a)"string"==typeof d&&a.hasOwnProperty(d)&&this.attr(f,a[d]);return this}return this._each(function(c){try{c.setAttribute(a,b),!c.removeAttribute||null!==b&&void 0!==b||c.removeAttribute(a)}catch(d){}})}return this._each(function(b){var c=b.getAttribute(a);"string"!=typeof c&&(c=null),f.push(c)}),c===!1?(this.pushResult(f),this):f.length<=1?f[0]:f},prop:function(a,b,c){var d=[];return arguments.length>1?this._each(function(c){if(c[a]=b,void 0===b)try{delete c[a]}catch(d){}}):(this._each(function(b){var c;try{c=b[a]}catch(e){k.log("NodeSelection#prop("+a+") :: Access Error",e)}d.push(c||null)}),c===!1?(this.pushResult(d),this):d.length<=1?d[0]:d)},enable:function(){return this.attr("disabled",null),this.declassify("_puredom_disabled"),this},disable:function(){return this.attr("disabled","disabled"),this.classify("_puredom_disabled"),this},enabled:function(a){return a===!0||a===!1?(this[a?"enable":"disable"](),this):"disabled"!==this.attr("disabled")&&this.prop("disabled")!==!0&&!this.hasClass("_puredom_disabled")},on:function(a,b,c){return this._each(function(d){k.addEvent(d,a,b,c)}),this},off:function(a,b,c){return this._each(function(d){k.removeEvent(d,a,b,c)}),this},trigger:function(a,b){return this._each(function(c){k.fireEvent(k.extend({},b||{},{type:a,target:c}))}),this},_removeAllEvents:function(a){var b;return this._each(function(a){o.wrappedEventListener.destroyObjHandlers(a,!0)}),b=this.children(),a===!0&&b.count()>0&&b._removeAllEvents(!0),b=a=null,this},appendChild:function(a){if(a&&this._nodes.length>0)if(a.constructor===this.constructor){var b=this._nodes[0];a._each(function(a){b.appendChild(a)})}else this._nodes[0].appendChild(a);return this},insertBefore:function(a,b){if(a&&this._nodes.length>0){if(b&&b.constructor===this.constructor&&(b=b._nodes[0]),!b||b.parentNode!==this._nodes[0])return this.appendChild(a);if(a.constructor===this.constructor){var c=this._nodes[0];a._each(function(a){c.insertBefore(a,b)},null,!0)}else this._nodes[0].insertBefore(a,b)}return this},insertInto:function(a){var b;return a&&this.count()>0&&(a.constructor===this.constructor&&(a=a._nodes[0]),1===this.count()?a.appendChild(this._nodes[0]):(b=d.createDocumentFragment(),this._each(function(a){b.appendChild(a)},null,!0),o.support.filters!==!0&&a.appendChild(b))),this},remove:function(){return this.fireEvent("remove"),this._each(function(a){a.parentNode&&a.parentNode.removeChild(a)}),this},destroy:function(){return this.remove(),this.fireEvent("destroy"),this._removeAllEvents(!0),this._nodes.splice(0,this._nodes.length),this},query:function(a,b){var c=[];return this._nodes.length>0&&(b=puredom.extend({},b||{}),this._each(function(d){var e;b.within=d,e=k.getElement(a,b),k.isArray(e)&&e.length>0&&(c=c.concat(e))})),new k.NodeSelection(c)},clone:function(a,b){var c=[];return b===!0&&(b=this.parent()),this._each(function(b){c.push(b.cloneNode(a!==!1))}),c=new k.NodeSelection(c),b&&b.appendChild(c),c._each(o.removeNodeUID),a!==!1&&c.query("*")._each(o.removeNodeUID),c},count:function(){return this._nodes.length},exists:function(){return this.count()>0},siblings:function(){var a=new k.NodeSelection;return this._each(function(b){for(var c=b;c=c.previousSibling;)"#text"!==c.nodeName&&"#comment"!==c.nodeName&&3!==c.nodeType&&a._nodes.push(c);for(c=b;c=c.nextSibling;)"#text"!==c.nodeName&&"#comment"!==c.nodeName&&3!==c.nodeType&&a._nodes.push(c)}),a},next:function(){for(var a=this._nodes[0]&&this._nodes[0].nextSibling;a&&3===a.nodeType;)a=a.nextSibling;return new k.NodeSelection(a&&[a]||null)},prev:function(){for(var a=this._nodes[0]&&this._nodes[0].previousSibling;a&&3===a.nodeType;)a=a.previousSibling;return new k.NodeSelection(a&&[a]||null)},previous:function(){return this.prev.apply(this,arguments)},firstChild:function(){return this.children().first()},lastChild:function(){return this.children().last()},nthChild:function(a){return this.children().index(a)},first:function(a){return new k.NodeSelection(this._nodes.slice(0,a||1))},last:function(a){return new k.NodeSelection(this._nodes.slice(this._nodes.length-(a||1)))},index:function(a,b){return new k.NodeSelection("number"===k.typeOf(a)&&this._nodes.slice(a,a+(b||1))||null)},parent:function(){var a,b=[];return this._each(function(c){a=c.parentNode,a&&b.indexOf(a)<0&&11!==a.nodeType&&b.push(a)}),new k.NodeSelection(b)},children:function(){var a,b,c=[];if(this._nodes.length>0)for(a=0;a<this._nodes.length;a++)if(this._nodes[a].childNodes)for(b=0;b<this._nodes[a].childNodes.length;b++)3!==this._nodes[a].childNodes[b].nodeType&&"#text"!==this._nodes[a].childNodes[b].nodeName&&"#comment"!==this._nodes[a].childNodes[b].nodeName&&c.push(this._nodes[a].childNodes[b]);return new k.NodeSelection(c)},submit:function(){return this._each(function(a){var b=k.fireEvent({type:"submit",target:a});b.rval!==!1&&b.returnValue!==!1&&b.preventDefault!==!0&&a.submit&&a.submit()})},selection:function(b,c){var e,f,g,h,i,j=this._nodes[0];return b&&"number"!=typeof b&&b.start&&(c=b.end,b=b.start),"number"!=typeof b?a.getSelection?(e="string"==typeof j.value?j.value:j.innerHTML,f=a.getSelection(),{start:j.selectionStart+0,end:j.selectionEnd+0,text:e.substring(f.start,f.end)}):d.selection?(f=d.selection.createRange(),g=d.body.createTextRange(),g.moveToElementText(j),g.setEndPoint("EndToStart",f),{start:g.text.length,end:g.text.length+f.text.length,text:f.text}):(k.log("Selection retrieval is not supported in this browser."),{start:0,end:0,text:""}):(0>b&&(b=0),h=j.value.length,c>h&&(c=h),b>c?b=c:b>c&&(c=b),a.getSelection?(j.selectionStart=b,j.selectionEnd=c):j.selectionEnd||0===j.selectionEnd?(j.selectionStart=b,j.selectionEnd=c):j.createTextRange&&(i=j.createTextRange(),i.collapse(!0),i.moveStart("character",b),i.moveEnd("character",c),i.select()),this)},template:function(a){var b,c=k.templateAttributeName;return a=a||{},b=function(a){var b,c=a.split("|");for(a=c.splice(0,1)[0],b=c.length;b--;)"htmlEntities"===c[b]&&c.splice(b,1);return c},this.query("["+c+"]").each(function(d){var e,f,g=d.nodeName(),h=d.attr(c),i=h;if(e=b(h),h=h.split("|")[0],i=puredom.delve(a,h),null!==i&&void 0!==i)if((i instanceof Date||"Date"===i.constructor.name)&&i.toLocaleString&&(i=i.toLocaleString()),f=d.attr("data-tpl-prop"))d.prop(f,k.text.filter(i,e.join("|")));else switch(g){case"select":case"input":case"textarea":case"meter":case"progress":d.value(i);break;case"img":case"video":case"audio":case"iframe":e.splice(0,0,"htmlEntities"),i=k.text.filter(i,e.join("|")),d.attr("src",i);break;default:e.splice(0,0,"htmlEntities"),i=k.text.filter(i,e.join("|")),d.html(i)}}),a=null,this}}),k.NodeSelection.prototype.fireEvent=k.NodeSelection.prototype.trigger,k.NodeSelection.prototype.emit=k.NodeSelection.prototype.trigger,k.NodeSelection.prototype.addEvent=k.NodeSelection.prototype.on,k.NodeSelection.prototype.removeEvent=k.NodeSelection.prototype.off,k.NodeSelection.prototype.animateCss=k.NodeSelection.prototype.animateCSS,o.incrementAnimationCount=function(a){a._puredom_animationCount=o.getAnimationCount(a)+1,1===a._puredom_animationCount&&k.addClass(a,"_puredom_animating")},o.decrementAnimationCount=function(a){var b=Math.max(0,o.getAnimationCount(a));b>1?a._puredom_animationCount=b-1:(a._puredom_animationCount=null,k.removeClass(a,"_puredom_animating"))},o.getAnimationCount=function(a){return parseInt(a._puredom_animationCount,10)||0},o.unload=function(){o.wrappedEventListener.reset(),k.getElement.clearCache(),o._nodeToIdList={},setTimeout(function(){a.puredom=o=n=j=null},10)},k.el=function(b,c){var e,f;if(b)if(f=typeof b,"string"===f&&"<"!==b.charAt(0))c===!0&&k.log("query is a CSS selector",b,f),e="body"===b?d.body:"html"===b?d.documentElement||d:k.getElement(b,arguments[1]);else if(k.isArray(b)){e=[];for(var g=0;g<b.length;g++)Array.prototype.splice.apply(e,[0,0].concat(k.el(b[g])._nodes))}else if("string"===f||"object"===f&&!b.nodeName&&b!==a)c===!0&&k.log("query is an HTML fragment",b,f),e=k.createElement.apply(k,arguments);else{if(b.constructor===k.NodeSelection)return c===!0&&k.log("query is already a NodeSelection",b.constructor+"",b.constructor.name),b;(b.nodeName||b===a)&&(c===!0&&k.log("query is an HTML element",b,f),b===a&&(b=d.documentElement||d),e=b)}return new k.NodeSelection(e)},k.node=function(a){return new k.NodeSelection(o.idToNode(a))},k.getElement=function(){function b(a,b){var d;b=b||c.baseNode,a=a.replace(/(\[[^\[\]= ]+=)([^\[\]"']+)(\])/gim,'$1"$2"$3');try{d=b.querySelectorAll(a),d&&(d=k.toArray(d))}catch(e){k.log("Native querySelectorAll failed for selector: "+a+", error:"+e.message)}return d||!1}var c,e,f,g={},h=!1,i=/^((?:[a-z][a-z0-9\_\-]*)|\*)?/gi,j=/^\s*(.*?)\s*$/gm,l=!1;return f=[{title:"ID selector {#id}",regex:/^#[_a-zA-Z0-9-]*/gm,filter:function(a,b,c){var e=c.searchBaseNode&&c.searchBaseNode.getElementById?c.searchBaseNode:d;return[e.getElementById(a[0].substring(1))]}},{title:"Class selector {.className}",regex:/^\.([^#.:\[<>\{+\|\s]+)/gim,filter:function(a,b){var c,d,e=" "+a[1]+" ";for(c=b.length;c--;)d=b[c]&&b[c].className,d&&-1!==(" "+d+" ").indexOf(e)||b.splice(c,1)}},{title:"Attribute selector {[name=value] & variants}",regex:/^\[([^\^\$\~=]+)(?:([\^\$\~=]+)(['"]?)([^\]]*))?\3\]/g,filter:function(a,b){var c,d,e,f,g;if(a&&a[1])for(d={attribute:a[1]},a[2]&&a[4]&&(d.type=a[2],d.attrValue=a[4]||""),c=b.length;c--;){switch(e=!1,f="checked"===d.attribute?"true"===d.attrValue||"false"===d.attrValue?b[c].checked?"true":"false":b[c].checked?"checked":null:"selected"===d.attribute?"true"===d.attrValue||"false"===d.attrValue?b[c].selected?"true":"false":b[c].selected?"selected":null:b[c]&&b[c].getAttribute(d.attribute+""),d.attrPresent="string"===k.typeOf(f),d.attrSet=f&&f.length>0,d.attrValue&&(g=d.attrPresent?f.indexOf(d.attrValue):-1),d.type||""){case"=":e=f===d.attrValue;break;case"^=":e=0===g;break;case"$=":e=d.attrSet&&f.substring(f.length-d.attrValue.length)===d.attrValue;break;case"~=":e=g>-1;break;default:e=!d.attrValue&&d.attrPresent}e||b.splice(c,1)}}},{title:"Descendant selector {>}",regex:/^\s*\>\s*((?:[a-z][a-z0-9\:\_\-]*)|\*)?/gi,filter:function(a,b,c){var d,e,f,g,h=[].concat(b),i=(a[1]||"*").toLowerCase();for(b.splice(0,b.length),!c.isFiltered&&c.first&&k.log("Descendant selector called on an unfiltered result set.  Operating on descendants of the document."),(!c.isFiltered||c.first)&&(h=[c.searchBaseNode]),d=0;d<h.length;d++)for(f=h[d].childNodes,e=0;e<f.length;e++)g=(f[e].nodeName+"").toLowerCase(),(g===i||"*"===i&&"#"!==g.charAt(0)&&(1===f[e].nodeType||9===f[e].nodeType))&&b.push(f[e])}},{title:"nth-child aliases, like :first-child",regex:/^\:(first|last|only)\-(child|of\-type)/gm,filter:function(a,b,c){var d,e,g,h,i={"first-child":":nth-child(0n+1)","first-of-type":":nth-of-type(0n+1)","last-child":":nth-last-child(0n+1)","last-of-type":":nth-last-of-type(0n+1)"};for(d=f.length;d--;)if(f[d].isNthChildSelector===!0){e=f[d];break}return i.hasOwnProperty(a[1]+"-"+a[2])&&e?(g=i[a[1]+"-"+a[2]],e.regex.lastIndex=0,h=e.regex.exec(g),e.filter(h,b,c)):void k.log('Unknown nth-child alias "'+a[1]+"-"+a[2]+'"')}},{isNthChildSelector:!0,title:"nth-child selector {:nth-child(n+2) & variants}",regex:/^\:(nth(?:\-last)?(?:\-of\-type|\-child))\((?:(\-?[0-9]*n(?:[+-][0-9]+)?)|([0-9]+)|([a-z]+))\)/gm,filter:function(a,b){var c,d,e,f,g,h,i,j,l,m,n=-1!==a[1].indexOf("-of-type"),o={odd:[2,1],even:[2]};if(c=b.splice(0,b.length),-1!==a[1].indexOf("-last")&&c.reverse(),a[2]?(f=a[2].split("n"),0===f[0].replace("-","").length&&(f[0]=f[0]+"1"),l=Math.round(f[0].replace("+",""))||0,m=Math.round(f[1].replace("+",""))||0):a[3]?(l=0,m=Math.round(a[3])||0):a[4]&&(f=a[4].toLowerCase(),o.hasOwnProperty(f)?(l=o[f][0]||0,m=o[f][1]||0):k.log('Unknown named nth-child expression "'+r[4]+'"')),!(0>=l+m))for(l===m&&(m=0),d=0;d<c.length;d++){if(children=(c[d].parentNode||{}).childNodes,h=(c[d].nodeName+"").toLowerCase(),isMatch=!1,children)for(j=0,e=0;e<children.length&&(i=children[e],g=n?(i.nodeName+"").toLowerCase()===h:"#"!==(i.nodeName+"").substring(0,1)||1===i.nodeType||9===i.nodeType,!g||(j+=1,i!==c[d]||!(isMatch=l>0?j%l-m===0:j===m)));e++);isMatch&&b.push(c[d])}}},{title:"within_internal selector { }",regex:/^\s+((?:[a-z][a-z0-9\:\_\-]*)|\*)?/gi,filter:function(a,b){var c,d=[].concat(b),e=a[1]||"*";for(b.splice(0,b.length),c=0;c<d.length;c++)Array.prototype.splice.apply(b,[b.length-1,0].concat(k.toArray(d[c].getElementsByTagName(e))))}}],e=function(a){a.lastIndex=0},c=function(m,n){var p,q,r,s,t,u,v,w,x,y,z,A,B,C=c.baseNode||(c.baseNode=d&&d.documentElement||d),D=m,E=0,F=!1,G=!o.support.querySelectorAll,H=Date.now();
if(m=(m+"").replace(j,"$1"),n=puredom.extend({},n||{}),n.logging===!0&&(F=!0),h&&n.useCache===!0&&g[m])return g[m];if(n.within&&(C=n.within),C&&C.length&&!C.nodeName&&C.indexOf&&C[0]&&(C=C[0]),m.indexOf(",")>-1){for(m=m.split(","),q=[],B=m.length;B--;)if(m[B]=m[B].replace(j,"$1"),m[B].length>0&&(v=c(m[B],puredom.extend({},n,{logging:!1,internalLogging:F,internal:!0}))))for(A=0;A<v.length;A++)-1===q.indexOf(v[A])&&q.push(v[A]);return F&&k.log("query=",D,", result=",node),H=Date.now()-H,H>100&&k.log('Slow Selector Warning: "'+D+'" took '+H+"ms to complete."),q}if(m.match(/^#[^\s\[\]\(\)\:\*\.\,<>#]+$/gim))return p=[(C.getElementById?C:d).getElementById(m.substring(1))];if(r=m.match(i),r=(r&&r[0]||"").toLowerCase(),m=m.substring(r.length),u=m,">"===D.charAt(0)&&(G=!0),o.support.querySelectorAll&&G!==!0&&(p=b(D,C),p===!1&&(p=[],G=!0)),G)for("#"===m.substring(0,1)?p=[]:r&&"*"!==r||!d.all||a.opera||C!==d&&C!==d.documentElement?(p=k.toArray(C.getElementsByTagName(r||"*")),x=!0):(p=k.toArray(C.all||d.all),x=!1),s={searchBaseNode:C,negated:!1,first:!0,isFiltered:x||!(!r||"*"===r)};u.length>0;){for(E+=1,w=!1,A=0;A<f.length&&(l===!0&&(y=Date.now()),e(f[A].regex),v=f[A].regex.exec(u),l===!0&&(y=Date.now()-y),v&&(w=!0,F&&k.log((f[A].title||f[A].regex)+' ==>> matched:"'+u.substring(0,v[0].length)+'" ==>> remaining:"'+u.substring(v[0].length)+'" ||debug>> (submatches:'+v.slice(1).join(",")+")"),l===!0&&(z=Date.now()),t=f[A].filter(v,p,s),t&&k.isArray(t)&&(p=t),l===!0&&(z=Date.now()-z),u=u.substring(v[0].length),s.first=!1,s.isFiltered=!0),l===!0&&(f[A].matchTimes.push(y),w&&f[A].filterTimes.push(z)),0!==u.length);A++);if(!w)throw new Error("puredom.getElement() :: Unknown CSS selector near: "+u.substring(0,20),"puredom.js",2689)}if(n.includeInvisibles!==!0)for(A=p.length;A--;)p[A]&&"#"===(p[A].nodeName+"").charAt(0)&&p.splice(A,1);return F&&k.log("query=",D,", result=",p),h&&n.cache===!0&&(g[m]=p),n.internal!==!0&&F===!0&&(H=Date.now()-H,H>10&&k.log('Slow Selector Warning: "'+D+'" took '+H+"ms to complete. "+E+" parse iterations.")),p},c.matchesSelector=function(a,b,d){return c(d,{within:a}).indexOf(b)>-1},c.enableCache=function(a){h=a!==!1,h||(g={})},c.disableCache=function(){h=!1,g={}},c.clearCache=function(){g={}},c._normalizeSelectorFilter=function(a){return 2===arguments.length&&(a={regex:arguments[0],filter:arguments[1]}),a&&a.regex&&a.filter?a:!1},c.addSelectorFilter=function(a){return a=c._normalizeSelectorFilter.apply(c,arguments),a?(f.push(a),!0):!1},c.removeSelectorFilter=function(a){var b,d,e;if(a=c._normalizeSelectorFilter.apply(c,arguments))for(b=f.length;b--;){e=!0;for(d in f[b])if(f[b].hasOwnProperty(d)&&f[b][d]!==a[d]){e=!1;break}if(e){f.splice(b,1);break}}return e===!0},l===!0?(!function(){for(var a=0;a<f.length;a++)f[a].matchTimes=[],f[a].filterTimes=[]}(),c.selectorStats=function(){var a,b,c,d,e,g,h={title:"--- Selector Statistics: ---",selectors:[]};for(b=0;b<f.length;b++){if(c=f[b],a={},a.title=c.title,g=0,c.matchTimes.length>0){for(e=0,d=0;d<c.matchTimes.length;d++)e+=c.matchTimes[d];g+=e,a.matching=Math.round(e/c.matchTimes.length)+"ms"}if(c.filterTimes.length>0){for(e=0,d=0;d<c.filterTimes.length;d++)e+=c.filterTimes[d];g+=e,a.filtering=Math.round(e/c.filterTimes.length)+"ms"}a.own_time=g+"ms",a.calls=c.matchTimes.length,h.selectors.push(a)}return h}):c.selectorStats=function(){return"disabled"},c}(),k.selectorEngine=k.getElement,k.DOMEvent=function(a){a&&(this.type=a.replace(/^on/gi,""))},k.DOMEvent.displayName="puredom.DOMEvent",k.extend(k.DOMEvent.prototype,{which:null,type:"",target:null,relatedTarget:null,preventDefault:function(){this.defaultPrevented=!0},stopPropagation:function(){this.propagationStopped=!0,this.bubblingCancelled=!0},cancel:function(){return this.preventDefault(),this.stopPropagation(),this.returnValue=!1,!1},returnValue:!0,originalEvent:null,timeStamp:null}),k.DOMEvent.prototype.cancelBubble=k.DOMEvent.prototype.stopPropagation,k.DOMEvent.prototype.stop=k.DOMEvent.prototype.cancel,k.DOMEvent.prototype.prevent=k.DOMEvent.prototype.cancel,o.wrappedEventListener={list:[],none:{},summary:function(){for(var a=0;a<this.list.length;a++)k.log(o.idToNode(this.list[a].target),".on",this.list[a].type," -> ",this.list[a].handler.displayName||this.list[a].handler.name)},reset:function(b){var c,d;if(b===!0)for(c=this.list.length;c--;)d=this.list[c],this.list[c]=this.none,k.removeEvent(o.idToNode(d.target),d.type,d.selector,d.wrappedHandler),this.unsetRefs(d),a.killCount=(a.killCount||0)+1;this.list.splice(0,this.list.length)},destroyObjHandlers:function(b){var c,d,e=o.nodeToId(b);for(c=this.list.length;c--;)d=this.list[c],d.target===e&&(this.unsetRefs(d),this.list.splice(c,1),k.removeEvent(b,d.type,d.selector,d.wrappedHandler),a.killCount=(a.killCount||0)+1)},get:function(b,c,d,e,f){var g,h;for(e=e||null,d=o.nodeToId(d),g=this.list.length;g--;)if(h=this.list[g],h.target===d&&h.handler===c&&h.selector===e&&h.type===b){c=h.wrappedHandler,f===!0&&(this.list.splice(g,1),a.killCount=(a.killCount||0)+1,this.unsetRefs(h));break}return c},unsetRefs:function(a){a.wrappedHandler.type=null,a.wrappedHandler.handler=null,a.wrappedHandler.target=null},internalFireEvent:function(a){var b,c,d,e=o.nodeToId(a.target),f=a.type.replace(/^on/gm,"");for(b=this.list.length;b--&&(c=this.list[b],c.target!==e||c.type!==f||(d=c.handler.call(a.target,a),d!==!1)););},create:function(b,c,e,f){f=f||null;var g={type:b,target:o.nodeToId(e),selector:f,handler:c,wrappedHandler:function h(b){var c,e,f,g=h.handler,i=(h.type||b.type).toLowerCase().replace(/^on/,""),j=this!==a?this:o&&o.idToNode(h.target),l={isInSelf:!1,doPreventDefault:!1,doCancelBubble:!1,doStopPropagation:!1,e:b||a.event,ret:null,end:function(){return l.end=null,b=e=l=g=i=j=null,this.ret}};o&&o.idToNode||k.log("target:<"+b.target.nodeName+' class="'+b.target.className+'" id="'+b.target.id+'"> , type:'+i+"/"+b.type),b=l.e,e=k.extend(new k.DOMEvent(i),{which:b.which,target:b.target||b.srcElement||j||d.body,relatedTarget:b.relatedTarget||("mouseout"===i?b.toElement:b.fromElement),returnValue:!0,originalEvent:b,timeStamp:b.timeStamp||Date.now()});for(f in b)e.hasOwnProperty(f)||"function"==typeof b[f]||f===f.toUpperCase()||"layerX"===f||"layerY"===f||(e[f]=b[f]);e.target||k.log("Event target doesn't exist for type \""+e.type+'": ',e.target,", srcElement=",b.srcElement),"touchend"===b.type&&o._lastTouchPos?(e.pageX=o._lastTouchPos.pageX,e.pageY=o._lastTouchPos.pageY):b.touches&&b.touches[0]?(e.pageX=b.touches[0].pageX,e.pageY=b.touches[0].pageY,o._lastTouchPos={pageX:e.pageX,pageY:e.pageY}):(b.pageX||0===b.pageX||b.clientX||0===b.clientX)&&(e.pageX=b.pageX||b.clientX+d.body.offsetLeft,e.pageY=b.pageY||b.clientY+d.body.offsetTop),(i.indexOf("key")>-1||b.keyCode||b.charCode)&&(e.keyCode=b.keyCode||b.which,e.charCode=b.keyCode||b.charCode||b.which,e.which=b.which),(i.indexOf("mouse")>-1||i.indexOf("click")>-1||null!==b.button&&void 0!==b.button)&&(e.button="number"==typeof b.button?b.button:b.which),e.target&&3===e.target.nodeType&&3!==j.nodeType&&(e.target=e.target.parentNode);var m,n,p=h.selector;p&&"string"==typeof p&&(m=k.getElement(p,{within:j})),l.searchNode=!m&&e.relatedTarget||e.target;do if(m){if(-1!==m.indexOf(l.searchNode)){n=!0,c=l.searchNode;break}}else if(l.searchNode===j){l.isInSelf=!0;break}while(l.searchNode&&(l.searchNode=l.searchNode.parentNode)&&l.searchNode!==d);if(!m||n){if("mouseover"!==i&&"mouseout"!==i||!l.isInSelf){if(g&&g.call&&(e.currentTarget=c||j,l.handlerResponse=g.call(c||j,e)),e.returnValue=l.handlerResponse!==!1&&e.returnValue!==!1,e.defaultPrevented&&(e.returnValue=b.returnValue=!1,b.preventDefault&&b.preventDefault()),e.bubblingCancelled===!0||e.propagationStopped===!0||e.cancelBubble===!0){b.stopPropagation&&b.stopPropagation();try{b.cancelBubble&&b.cancelBubble.call?b.cancelBubble():b.cancelBubble=!0}catch(q){}}l.ret=e.returnValue}else l.ret=!0;return l.end()}}};return g.wrappedHandler.displayName="wrappedEventHandler_"+b,g.wrappedHandler.handler=c,g.wrappedHandler.type=b,g.wrappedHandler.target=g.target,g.wrappedHandler.selector=f,this.list.push(g),e=b=c=g=null,this.list[this.list.length-1].wrappedHandler}},o.getSubjectDescription=function(a){return(a.nodeName?k.el(a)+"":a.constructor&&a.constructor.name||a.name||a)+""},k.eventTypeMap={},o.support.webkitMultitouch&&k.extend(k.eventTypeMap,{mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"}),k.addEvent=function(a,b,c,d){var e,f;if("function"==typeof c&&(d=c,c=null),a){if("string"===k.typeOf(b)&&b.indexOf(",")>-1&&(b=b.replace(/\s/gm,"").split(",")),k.isArray(b)){for(e=0;e<b.length;e++)k.addEvent(a,b[e],c,d);return!0}if(f=b=(b+"").toLowerCase().replace(/^\s*(on)?(.*?)\s*$/gim,"$2"),"string"!=typeof b||!d||!d.call)return void k.log("Attempted to add event with invalid type or handler:",{type:b,handler:d+"",subject:o.getSubjectDescription(a)});k.eventTypeMap.hasOwnProperty(b)&&(b=k.eventTypeMap[b]),d=o.wrappedEventListener.create(f,d,a,c),a.attachEvent?a.attachEvent("on"+b,d):a.addEventListener&&(a.addEventListener(b,d,!1),k._eventCount=(k._eventCount||0)+1)}},k.removeEvent=function(a,b,c,d){var e,f;if("function"==typeof c&&(d=c,c=null),a){if("string"===k.typeOf(b)&&b.indexOf(",")>-1&&(b=b.replace(/\s/gm,"").split(",")),k.isArray(b)){for(e=0;e<b.length;e++)k.removeEvent(a,b[e],c,d);return!0}if(f=b=(b+"").toLowerCase().replace(/^\s*(on)?(.*?)\s*$/gim,"$2"),"string"!=typeof b||!d||!d.call)return void k.log("Attempted to remove event with invalid type or handler:",{type:b,handler:d+"",subject:o.getSubjectDescription(a)});if(k.eventTypeMap.hasOwnProperty(b)&&(b=k.eventTypeMap[b]),d=o.wrappedEventListener.get(f,d,a,c,!0),a.detachEvent)a.detachEvent("on"+b,d);else if(a.removeEventListener)try{a.removeEventListener(b,d,!1),k._eventCount=(k._eventCount||0)-1}catch(g){}}},k.cancelEvent=function(b){if(b=b||a.event){b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation();try{b.cancelBubble=!0}catch(c){}b.returnValue=!1}return!1},k.fireEvent=function(a){var b,c,e,f,g;if(a=a||{},d.createEventObject){a=k.extend({},a),a.type="on"+a.type.toLowerCase().replace(/^on/,"");try{b=d.createEventObject()}catch(h){g=!0}if(!g){for(e in a)if(a.hasOwnProperty(e))try{b[e]=a[e]}catch(h){}try{c=a.target.fireEvent(a.type,b),f=b.preventDefault===!0}catch(h){g=!0}}g&&o.wrappedEventListener.internalFireEvent&&o.wrappedEventListener.internalFireEvent(a)}else{b=d.createEvent("HTMLEvents"),b.initEvent(a.type.toLowerCase().replace(/^on/,""),!0,!0);for(e in a)if(a.hasOwnProperty(e))try{b[e]=a[e]}catch(h){}c=!a.target.dispatchEvent(b),f=b.preventDefault===!0}return{evt:b,preventDefault:f,rval:c}},o._nodeToIdIndex=0,o._nodeToIdList={},o.nodeToId=function(b){var c,e;return b===a?"_td_autoid_window":b===d.documentElement?"_td_autoid_html":b===d.body?"_td_autoid_body":(c=/\s_td_autoid_([0-9]+)\s/gm.exec(" "+b.className+" "),c&&c[1]?e=c[1]:(o._nodeToIdIndex+=1,e=o._nodeToIdIndex+"",k.addClass(b,"_td_autoid_"+e)),o.ensureNodeIdListing(b,e),e)},o.idToNode=function(b){var c,e,f=o._nodeToIdList[b+""];return"_td_autoid_window"===b?a:"_td_autoid_html"===b?d.documentElement:"_td_autoid_body"===b?d.body:(f&&(e=k.getElement(f),/\s_td_autoid_[0-9]+\s/gm.exec(" "+e.className+" ")||(e=null)),e||(c=k.getElement("._td_autoid_"+b),e=c&&c[0],e&&o.ensureNodeIdListing(e,b)),e||!1)},o.ensureNodeIdListing=function(a,b){var c;a.getAttribute&&(c=a.getAttribute("id"),c||(c="_td_autoid_"+b,a.setAttribute("id",c)),o._nodeToIdList[b]="#"+c)},o.removeNodeUID=function(a){var b=a.getAttribute("id");b&&b.match(/^_td_autoid_[0-9]+$/g)&&(a.removeAttribute?a.removeAttribute("id"):a.setAttribute("id","")),a.className&&(a.className=a.className.replace(/(^|\b)_td_autoid_[0-9]+(\b|$)/gim,""))},k.animationFrame=function(){function b(){return e&&e.now?e.now():Date.now()}var c,d={nativeSupport:!0,manualFramerate:11},e=a.performance;return a.requestAnimationFrame?c="":a.mozRequestAnimationFrame?c="moz":a.webkitRequestAnimationFrame?c="webkit":d.nativeSupport=!1,d.nativeSupport?(d.getTimer=function(b){return a[(c?c+"R":"r")+"equestAnimationFrame"](b)},d.cancelTimer=function(b){a[(c?c+"C":"c")+"ancelRequestAnimationFrame"](b)},d.getStartTime=function(){return a[(c?c+"A":"a")+"nimationStartTime"]||b()}):(d.getTimer=function(a){return setTimeout(function(){a(b()),a=null},d.manualFramerate)},d.cancelTimer=function(a){clearTimeout(a)},d.getStartTime=function(){return b()}),d}(),k.setOpacity=function(a,b){1>=b&&b>0&&(b=100*b),b=Math.round(b),100>b?(a.style.opacity=parseFloat(b/100).toFixed(2),a.style.filter="alpha(opacity="+b+")"):(a.style.opacity=null,a.style.filter=null)},k.applyMsFilter=function(a,b,c){var d,e,f,g,h,i="",j="MsFilter"===o.support.filterProperty?'"':"";if(b=b.charAt(0).toUpperCase()+b.substring(1),"string"==typeof c)for(i=c,c={},g=i.replace(/\s*(,|=)\s*      /gm,"$1").split(","),f=0;f<g.length;f++)h=g[f].indexOf("="),c[g[f].substring(0,h)]=g[f].substring(h+1);else{for(f in c)c.hasOwnProperty(f)&&(i+=", "+f+"="+c[f]);i=i.replace(",","")}try{d=a.filters&&a.filters.item&&(a.filters.item("DXImageTransform.Microsoft."+b)||a.filters.item(b))}catch(l){}if(d){for(f in c)c.hasOwnProperty(f)&&"enabled"!==f&&(d[f]=c[f]);d.enabled=c.enabled?1:0}else e=a.style.MsFilter||a.style.filter||"",e+=" "+(k.nodeStyle(a,"MsFilter")||k.nodeStyle(a,"filter")||""),e&&(e=e.replace(new RegExp('(^|\\s|\\))"?((progid\\:)?DXImageTransform\\.Microsoft\\.)?'+b+'\\s*?\\(.*?\\)"?\\s*?',"gim"),"$1")+" "),a.style[o.support.filterProperty]=e+j+"progid:DXImageTransform.Microsoft."+b+"("+i+")"+j;a.style.zoom||(a.style.zoom=1)};var q={};k.applyCss=function(a,b){var d,e,f,h,i;b=b||{};for(d in b)if(b.hasOwnProperty(d))try{e=k.getStyleAsCSS(d),e=e.replace(/^\-(moz|webkit|ms|o|vendor)\-/gim,g+"-"),e=k.getStyleAsProperty(e),e=c(e),"opacity"===e&&o.support.filters?(i=Math.round(100*parseFloat(b[d])),100>i?k.applyMsFilter(a,"alpha",{enabled:!0,opacity:i}):k.applyMsFilter(a,"alpha",{enabled:!1})):"--box-shadow"===e&&o.support.filters?(f=b[d].match(/\b(\#[0-9af]{3}[0-9af]{3}?|rgba?\([0-9\,\s]+\))\b/gim),f=f&&f[0]||"",h=(" "+b[d]+" ").replace(f,"").replace(/\s+/m," ").split(" ").slice(1,4),k.applyMsFilter(a,"glow",{Color:f,Strength:Math.round(h[3].replace(/[^0-9\-\.]/gim,""))})):a.style[e]=b[d]}catch(j){}},k.getStyleAsProperty=function(a){return"string"!=typeof a?null:(a=a.replace(/\-[a-z0-9]/gim,o.styleAsPropReplacer),a=a.replace(/^(webkit|moz|ms|o)[A-Z]/gm,o.styleAsPropVendorPrefixReplacer))},o.styleAsPropReplacer=function(a){return a.charAt(1).toUpperCase()},o.styleAsPropVendorPrefixReplacer=function(a){return a.charAt(0).toUpperCase()+a.substring(1)},k.getStyleAsCSS=function(a){return"string"==typeof a&&a.replace(/\-*([A-Z])/gm,"-$1").toLowerCase()||null},o.parseCSS=function(a){var b,c,d=/\s*([a-z\-]+)\s*:\s*([^;]*?)\s*(?:;|$)/gi;if(a)for(b={},d.lastIndex=0;c=d.exec(a);)b[k.getStyleAsProperty(c[1])]=c[2];return b},k._parseCss=o.parseCSS,k.getCssTransitions=function(a){var b,c,d,e,f={},g={properties:"-vendor-transition-property",durations:"-vendor-transition-duration",timingFunctions:"-vendor-transition-timing-function"};for(b in g)g.hasOwnProperty(b)&&(g[b]=(k.nodeStyle(a,g[b])||"").replace(/\s/,"").split(","));for(c=0;c<g.properties.length;c++)!g.properties[c]||"null"===g.properties[c]||"all"===g.properties[c]&&g.durations[c].match(/^[0\.ms]*$/)||(d=g.durations[c]||g.durations[g.durations.length-1],e=parseFloat(d.replace(/[^\-0-9\.]/gim,""))||0,d.match(/ms$/i)||(e*=1e3),f[k.getStyleAsProperty(g.properties[c])]={duration:e,timingFunction:g.timingFunctions[c]||g.timingFunctions[g.timingFunctions.length-1]||"ease"});return f},k.setCssTransitions=function(a,b){var c,d={"-vendor-transition-property":[],"-vendor-transition-duration":[],"-vendor-transition-timing-function":[]};for(c in b)b.hasOwnProperty(c)&&b[c]&&(d["-vendor-transition-property"].push(c.toLowerCase()),d["-vendor-transition-duration"].push((b[c].duration/1e3).toFixed(3)+"s"),d["-vendor-transition-timing-function"].push(b[c].timingFunction||"ease"));for(c in d)d.hasOwnProperty(c)&&(d[c]=d[c].join(", "));k.applyCss(a,d)},k.updateCssTransitions=function(a,b){var c,d;if(b){c=k.getCssTransitions(a);for(d in b)b.hasOwnProperty(d)&&(b[d]?c[d]=b[d]:delete c[d]);k.setCssTransitions(a,c)}},k.addClass=function(a,b,c){var d,e,f,g=!1;if(b){for(k.isArray(b)||(b=[b]),d=(a.className||"").split(/\s+/),f=0;f<b.length;f++)e=d.indexOf(b[f]),c!==!0&&-1===e?(g=!0,d.push(b[f])):c===!0&&e>-1&&(g=!0,d.splice(e,1));g&&(a.className=d.join(" "))}},k.removeClass=function(a,b){return k.addClass(a,b,!0)},k.nodeStyle=function(b,c){var e,f,h,i=(c+"").replace(/[A-Z]/g,"-$0").toLowerCase();return i=i.replace(/^\-(moz|webkit|ms|o|vendor)\-/gim,g+"-"),e=i.replace(/\-[a-z]/gim,function(a){return a.substring(1).toUpperCase()}),"opacity"===i&&o.support.filters?b.filters.alpha&&b.filters.alpha.enabled!==!1&&Math.round(b.filters.alpha.opacity)/100:(b.style&&b.style[e]?h=b.style[e]||"":b.currentStyle&&b.currentStyle[e]?h=b.currentStyle[e]||b.currentStyle[i]||"":d.defaultView&&d.defaultView.getComputedStyle?(f=d.defaultView.getComputedStyle(b,null),h=f&&(f.getPropertyValue(i)||f.getPropertyValue(e))||""):a.getComputedStyle&&(f=a.getComputedStyle(b,null),h=f&&(f.getPropertyValue(i)||f.getPropertyValue(e))||""),h)},k.htmlEntities=function(a,b){var c=["htmlEntities"];return b===!0&&c.push("stripTags"),k.text.filter(a,c)},k.log=function(){var a=b.console;a&&a.log&&a.log.apply(a,arguments)},k.addNodeSelectionPlugin=function(a,b){k.NodeSelection.prototype.hasOwnProperty(a)||(k.NodeSelection.prototype[a]=function(){var a=b.apply(this,arguments);return null===a||void 0===a?this:a})},k.init=function(){m||(m=!0,k.forEach(o.oninit,function(a){a.call(k,k)}),k.fireEvent({target:d.body,type:"puredomready",puredom:k}))},k.addEvent(d,"DOMContentLoaded",k.init),k.addEvent(a,"load",k.init),k.addEvent(a,"unload",o.unload),function(){if(f){for(var a in f)f.hasOwnProperty(a)&&(k[a]=f[a]);f=null}}(),o.puredom=function(a){return"function"===k.typeOf(a)?(m===!0?a.call(k,k):o.oninit.push(a),k):k.el.apply(k,arguments)},k.extend(k,l),k.toString=function(){return"function puredom(){}"},this.puredom=b.puredom=k,"function"==typeof define&&define.amd&&define("puredom",function(){return k}),"object"==typeof module&&(module.exports=k)}(this,"object"==typeof global?global:this),puredom.extend(puredom,{text:function(){var a=function(){return a.filter.apply(this,arguments)},b={htmlEntities:/[&<>"]/gim,ucWords:/(^|\s)[a-z]/gim,ucFirst:/^[a-z]/gim,nl2br:/\r?\n/g,numbersOnly:/[^0-9.\-]/gim,trim:/^\s*?(.*?)\s*?$/gim};return a.filter=function(b,c){var d,e,f,g,h;if("array"!==puredom.typeOf(c)&&(c=((c||"")+"").split("|")),arguments.length>2)for(d=2;d<arguments.length;d++)"array"===puredom.typeOf(arguments[d])?c=c.concat(arguments[d]):c.push(arguments[d]);for(d=0;d<c.length;d++){e=c[d],g=[b],f=e.indexOf(":"),f>-1&&(e=e.substring(0,f),g=g.concat(c[d].substring(f+1).split(",")));for(h in a)if((h+"").toLowerCase()===e.toLowerCase()){b=a[h].apply(a,g);break}}return b},a.escape=function(a){return encodeURIComponent(a)},a.unescape=function(a){return decodeURIComponent(a)},a.htmlEntities=function(a){var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};return(a+"").replace(b.htmlEntities,function(a){return c[a]})},a.ucWords=function(a){return(a+"").toLowerCase().replace(b.ucWords,function(a){return a.toUpperCase()})},a.ucFirst=function(a){return(a+"").toLowerCase().replace(b.ucFirst,function(a){return a.toUpperCase()})},a.nl2br=function(a){return(a+"").replace(b.nl2br,"<br />")},a.numbersOnly=function(a){return(a+"").replace(b.numbersOnly,"")},a.truncate=function(a,b,c,d){var e=!1,f=a+"";return a=f,b=parseInt(b,10)||80,c=c===!0||"true"===c||"byWord"===c,d=d||"...",a.length>b&&(c?(a=a.substring(0,b),f.charAt(b).match(/\s/)||(a=a.replace(/\s[^\s]*$/,""))):a=a.substring(0,b-d.length),e=!0),e&&(a+=d),a},a.trim=function(a){var b,c=/\s/;for(a=a.replace(/^\s\s*/,""),b=a.length;c.test(a.charAt(--b)););return a.slice(0,b+1)},a["default"]=function(b,c){return b=a.trim(b),b?b:c},a.dateformat=function(a,b){var c,d=puredom.i18n,e=puredom.date;return e&&e.create&&(c=e.create(a)),(!c||(c+"").indexOf("Invalid")>-1)&&(c=new Date(a),(!c||(c+"").indexOf("Invalid")>-1)&&(c=new Date,c.setTime(Math.round(a)))),b&&b.indexOf("%")>-1?e&&e.format&&(a=e.format(c,b)):d&&(a=d(c,null,null,{datetype:b||"date"})||c+""),a},a}(),parameterize:function(a,b){var c,d,e,f,g=[],h=puredom.extend({delimiter:"&",startDelimiter:"?",assignment:"=",typeHandlers:null},b);for(c in a)if(a.hasOwnProperty(c))if(d=a[c],f=this.typeOf(d),h.typeHandlers&&h.typeHandlers.hasOwnProperty(f))g.push(h.delimiter+encodeURIComponent(c)+"="+encodeURIComponent(h.typeHandlers[f](d)));else if("array"===f&&h.disableArrayParams!==!0)for(e=0;e<d.length;e++)g.push(h.delimiter+encodeURIComponent(c)+"[]="+encodeURIComponent(d[e]));else{switch(f){case"boolean":d=d?"true":"false";break;case"null":case"undefined":d="";break;case"object":d=h.useJsonForObjects!==!1?this.json(d):this.parameterize(d)}g.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return g=g.join(h.delimiter||"&"),g=(h.startDelimiter||"")+g},querystring:{parse:function(a){var b,c,d,e={};for("?"===a.substring(0,1)&&(a=a.substring(1)),b=a.split("&"),c=0;c<b.length;c++)b[c]&&(d=b[c].indexOf("="),e[decodeURIComponent(b[c].substring(0,d))]=0>d?"":decodeURIComponent(b[c].substring(d+1)));return e},stringify:function(a,b){return b=puredom.extend({startDelimiter:""},b||{}),puredom.parameterize(a,b)},build:function(){return puredom.querystring.stringify.apply(puredom.querystring,arguments)}},cookies:function(){var a={};return{set:function(b,c,d,e,f,g){var h,i="",j="";f="string"==typeof f?f:"",d&&(h=new Date,h.setTime(h.getTime()+24*d*60*60*1e3),i="; expires="+h.toGMTString()),a.hasOwnProperty(b)&&a[b].expires&&(i="; expires="+a[b].expires.toGMTString()),j=b+"="+encodeURIComponent(c)+i+"; path=/"+f.replace(/^\//,""),"string"==typeof e&&e.length>0&&(j+="; domain="+e.replace(/[\;\,]/,"")),g===!0&&(j+="; secure"),document.cookie=j,a[b]={value:c,expires:h}},get:function(b,c){if(a.hasOwnProperty(b)&&c!==!0)return a[b].value;var d,e,f=document.cookie.split(";");for(e=0;e<f.length;e++)if(d=f[e].replace(/^\s+/gim,""),0===d.indexOf(b+"="))return decodeURIComponent(d.substring(b.length+1,d.length));return null},remove:function(b){this.set(b,"",-1),delete a[b]},purge:function(){for(var b in a)a.hasOwnProperty(b)&&(this.remove(b),delete a[b])},read:function(){return this.get.apply(this,arguments)},write:function(){return this.set.apply(this,arguments)}}}(),Cache:function(){function a(){return this.constructor!==arguments.callee&&this.constructor!==a?new a:void(this.data={})}return puredom.extend(a.prototype,{defaultType:"_default",purge:function(){this.data={}},get:function(a,b,c){var d;return 2===arguments.length&&(b=a,c=b,a=null),a=(a||this.defaultType)+"",b+="",d=this.data.hasOwnProperty(a)&&this.data[a][b]||!1,c?(d&&c(d),!!d):d},set:function(a,b,c){2===arguments.length&&(b=a,c=b,a=null),a=(a||this.defaultType)+"",b+="",this.data[a]||(this.data[a]={}),this.data[a][b]=c},proxySet:function(a,b,c,d){var e=this;return function(){e.set(a,b,arguments[d||0]),c&&c.apply(c,arguments)}},each:function(a){return puredom.foreach(this.data,a)}}),a}(),json:function(){var a=function(b){return"string"===puredom.typeOf(b)?a.parse(b):a.stringify(b)};return a.stringify=function(a){var b;try{b=JSON.stringify(a)}catch(c){puredom.log("puredom.json:: Stringify failed: "+c+" | "+a)}return b},a.parse=function(a){var b;if("string"==typeof a&&a.length>0)try{b=JSON.parse(a)}catch(c){puredom.log("puredom.json:: Parse failed: "+c+" | "+a)}return b},a.serialize=a.stringify,a.unserialize=a.parse,a}(),xml:{parse:function(a){var b;return window.DOMParser?b=(new window.DOMParser).parseFromString(a,"text/xml"):(b=new window.ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)),b}}}),function(a){function b(a,b,c,d,e){var f,g,h,i=typeof c;if("object"===i&&c){for(g in c)c.hasOwnProperty(g)&&(h=a[b](g,c[g]),e&&e.push(h));return!0}if("string"===i&&c.indexOf(",")>-1){for(f=c.split(","),g=0;g<f.length;g++)h=a[b](f[g],d),e&&e.push(h);return!0}return!1}function c(a){return String(a).toLowerCase().replace(/(^on|\s+)/gim,"")}a.EventEmitter=function(){this._eventRegistry=[]};var d=a.EventEmitter.prototype;a.extend(d,{on:function(a,d){return a=c(a),b(this,"on",a,d)||this._eventRegistry.push({type:a,handler:d}),this},once:function(a,d){return a=c(a),b(this,"once",a,d)||this.on(a,function e(){return this.removeListener(a,e),d.apply(this,arguments)}),this},removeListener:function(a,d){var e,f;if(a=c(a),!b(this,"removeListener",a,d))for(e=this._eventRegistry.length;e--;)if(f=this._eventRegistry[e],f.type===a&&f.handler===d){this._eventRegistry.splice(e,1);break}return this},emit:function(a,d){var e,f,g,h=[];if(a=c(a),d=Array.prototype.slice.call(arguments,1),b(this,"emit",a,d,h))return Array.prototype.concat.apply([],h);for(e=this._eventRegistry.length;e--&&(f=this._eventRegistry[e],f.type!==a||(0===h.length&&(h.falsy=h.falsey=h.truthy=!0),g=f.handler.apply(this,d),h.push(g),g===!0?h.falsy=h.falsey=!1:g===!1&&(h.truthy=!1),g!==!1)););return h},fireEvent:function(a,b){return this.emit.apply(this,[a].concat(b))}}),a.forEach({addListener:"on",addEventListener:"on",removeEventListener:"removeListener",trigger:"emit"},function(a,b){d[b]=d[a]})}(puredom),puredom.date={now:Date.now?function(){return Date.now()}:function(){return+new Date},create:function(a){var b;return a?(a=(a+"").replace(/^([0-9]{4})\-([0-9]{2})\-([0-9]{2})T([0-9]{2})\:([0-9]{2})\:([0-9]{2})\.[0-9]{3}Z$/,"$1/$2/$3 $4:$5:$6"),b=new Date(a)):b=new Date,b},parse:function(a,b){function c(a,b){(b===!1||b===!0)&&(i.pm=b===!0),(a||0===a)&&(i.hours=a),a=i.hours,i.hours<12&&i.pm&&(a-=12);var c=h.getDate();12===i.hours&&i.pm===!1?(0!==h.getHours()||"boolean"==typeof b)&&h.setHours(0):(h.setHours(a),h.setDate(c))}function d(a){return f[1](a),""}b=b||"%d/%m/%Y";var e,f,g,h=new Date(0),i={},j={H:[/^[0-9]{1,2}/g,function(a){a=Math.round(a),c(a)}],I:[/^[0-9]{1,2}/g,function(a){a=Math.round(a),c(a)}],p:[/^[AP]M/gi,function(a){c(null,"pm"===a.toLowerCase())}],M:[/^[0-9]{1,2}/g,function(a){h.setMinutes(Math.round(a))}],a:[/^(Mon|Tue(s?)|Wed|Thu|Fri|Sat|Sun)/i,function(){}],A:[/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday)/i,function(){}],d:[/^[0-9]{1,2}/g,function(a){i.date=Math.round(a),h.setDate(i.date)}],m:[/^[0-9]{1,2}/g,function(a){i.month=Math.round(a)-1,h.setMonth(i.month)}],B:[new RegExp("^("+this.months.join("|")+")","gi"),function(a){i.month=date._getMonthIndex(a),h.setMonth(i.month)}],b:[/^(Jan|Feb|Mar|Apr|May|Jun(e?)|Jul(y?)|Aug|Sep(t?)|Oct|Nov|Dec)/gi,function(a){i.month=date._getMonthIndex(a),h.setMonth(i.month)}],y:[/^[0-9]{2}/g,function(a){a=Math.round(a)+1900,1950>a&&(a+=100),h.setFullYear(a)}],Y:[/^[0-9]{4}/g,function(a){i.year=Math.round(a),h.setFullYear(i.year)}]};for(j.l=j.I,j.e=j.d,j.P=j.p,j.h=j.b,e=0;e<b.length;e++)if("%"===b.charAt(e)){f=null," "===a.charAt(0)&&"%"===b.charAt(e)&&(a=a.substring(1));for(g in j)if(j.hasOwnProperty(g)&&b.substring(e+1,e+1+g.length)===g){f=j[g],a=a.replace(f[0],d),e+=f.length-1;break}}else a.charAt(0)===b.charAt(e)&&(a=a.substring(1));return(i.month||0===i.month)&&h.setMonth(i.month),(i.year||0===i.year)&&h.setFullYear(i.year),h},unformat:function(){return this.parse.apply(this,arguments)},format:function(a,b){if(b=b||"%d/%m/%Y",!a||a.constructor!==Date||!a.toDateString)return!1;var c=a.toDateString();if(!c||"invalid date"===c.toLowerCase())return!1;if("NaN"===c)return!1;var d=c.split(" "),e=a.getHours(),f=(e+11)%12+1,g=a.getMonth()+1,h={H:e,I:(10>f?"0":"")+f,l:f,p:e>11?"PM":"AM",P:e>11?"pm":"am",M:(a.getMinutes()<10?"0":"")+a.getMinutes(),S:(a.getSeconds()<10?"0":"")+a.getSeconds(),a:d[0],A:this.weekdays[a.getDay()],d:d[2],e:Math.round(d[2]),m:(10>g?"0":"")+g,B:this.months[Math.round(d[1])],b:d[1],h:d[1],y:d[3].substring(2),Y:d[3]};return b.replace(/%[HIlpPMSaAdemBbhyY]/gm,function(a){var b=h[a.charAt(1)+""];return b||0===b||b===!1?b:a})},_getMonthIndex:function(a){a=a.substring(0,3).toLowerCase();for(var b=0;b<this.months.length;b++)if(this.months[b].substring(0,3).toLowerCase()===a)return b;return-1},weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]},puredom.net=puredom.extend(new puredom.EventEmitter,{HttpRequest:function(a){puredom.extend(this,a)},get:function(a,b,c){return this.request(puredom.extend({url:a,method:"GET"},c||{}),b)},post:function(a,b,c,d){return this.request(puredom.extend({url:a,method:"POST",body:b},d||{}),c)},request:function(a,b){function c(){var a,b,c,f,g=d.request,h={json:"JSON",document:"XML"},i=/^([a-z\-\.\_])\s*?\:/gim;if(4===g.readyState){for(e.fireEvent("before:response",d),d.status=g.status,d.responseType="text",g.responseType&&"text"!==g.responseType||(d.responseText=d.response=g.responseText),d.responseHeaders={},i.lastIndex=0,a=g.getAllResponseHeaders();f=i.exec(a);)d.responseHeaders[f[1].toLowerCase()]=g.getResponseHeader(f[1]);if(d.contentTypeOverride)b=d.contentTypeOverride.toLowerCase();else{try{b=g.getResponseHeader("Content-Type").toLowerCase().split(";")[0]}catch(j){}b=b||""}if(c=g.responseType)d.responseType=c,d.response=g.response,f="response"+(h[c]||c.charAt(0).toUpperCase()+c.substring(1)),d[f]=d.response;else if(b.match(/(^|\/)(json|javascript)$/gm)){d.responseType="json";try{d.response=d.responseJSON=JSON.parse(g.responseText.replace(/^[^\[\{]*(.*)[^\[\{]*$/g,"$1"))}catch(k){d.jsonParseError=k}}else("application/xml"===b||"xml"===b)&&(d.responseType="document",d.response=d.responseXML=g.responseXML);"function"==typeof d.callback&&d.callback(d.status<400,d.response,d)}}var d,e=this;return a=a||{},a.url?(!a.method&&a.type&&(a.method=a.type,console.warn("puredom.net.request: The `type` option is deprecated. Use `method`.")),!a.body&&a.post&&(a.body=a.post,console.warn("puredom.net.request: The `post` option is deprecated. Use `body`.")),d=new puredom.net.HttpRequest({url:a.url,type:a.method||(a.body?"POST":"GET"),callback:b||a.callback,body:a.body,headers:{"content-type":"application/x-www-form-urlencoded","x-requested-with":"XMLHttpRequest"}}),a.headers&&puredom.forEach(a.headers,function(a,b){var c=d.headers;b=String(b).toLowerCase(),void 0===a||null===a?delete c[b]:c[b]=String(a)}),a.contentTypeOverride&&(d.contentTypeOverride=a.contentTypeOverride,delete a.contentTypeOverride),a.responseType&&(d.responseType=a.responseType),a=b=null,this.createXHR(d,function(a){d.xhr=a,d.request=a,a.onreadystatechange=c,a.open(d.type,d.url,d.async!==!1),d.responseType&&(a.responseType=d.responseType),puredom.forEach(d.headers,function(b,c){a.setRequestHeader(c,b)}),!d.bodySerialized&&d.body&&"object"===puredom.typeOf(d.body)&&e.serializeRequestBody(d),a.send(d.bodySerialized||d.body||null)}),d):!1},requestSerializers:{json:puredom.json,xml:puredom.xml,"form-encoded":puredom.querystring},serializeRequestBody:function(a){var b=(a.headers["content-type"]||"application/x-www-form-urlencoded").toLowerCase();puredom.forEach(this.serializers,function(c,d){return b.indexOf(d)>-1?(a.bodySerialized=(c.stringify||c.encode||c)(a.body),!1):void 0})},createXHR:function(a,b,c){var d;if(c=c||window,c.XMLHttpRequest)d=new c.XMLHttpRequest;else try{d=new c.ActiveXObject("Msxml2.XMLHTTP")}catch(e){d=new c.ActiveXObject("Microsoft.XMLHTTP")}return b(d),d}}),puredom.net.jsonp=function(){var a=function(){return a.get.apply(a,arguments)},b=0;return a.get=function(a,c,d){var e,f,g,h;return"function"===puredom.typeOf(c)&&(d&&"object"===puredom.typeOf(d)&&(h=d),d=c,h&&(c=h)),c=c||{},c.callback&&!d&&(d=c.callback),c.timeout||(c.timeout=10),(a=a||c.url)?(c.params&&puredom.parameterize&&(a+=(a.indexOf("?")>-1?"&":"?")+puredom.querystring.stringify(c.params)),b+=1,c.callback=g="puredom_net_jsonp_"+b,function(){window[c.callback]=function(a){var b;if(d){try{d(a)}catch(c){b=c}d=null}if(f&&(f.stop(),f=null),b)throw b}}(),a.indexOf("{!callback}")>-1?a=a.replace("{!callback}",g):a+=(a.indexOf("?")<0?"?":"&")+encodeURIComponent(c.callbackParam||"callback")+"="+encodeURIComponent(g),this._head||(h=document.getElementsByTagName("head"),this._head=h&&h[0]),e=puredom.el({type:"script",attributes:{src:a,async:"async",type:"text/javascript"},parent:this._head||document.body}),f={id:g,stop:function(){f._timer&&clearTimeout(f._timer),window[g]=null;
try{delete window[g]}catch(a){}d=null,e.attr("src","about:blank").remove(),g=f=e=null}},c.timeout&&c.timeout>0&&(f._timer=setTimeout(function(){d&&d({_requestTimedOut:!0,_jsonpTimedout:!0,success:!1,result:!1}),f&&f.stop()},Math.round(1e3*c.timeout))),a=c=h=null,f):!1},a}(),puredom.LocalStorage=function(a,b,c){var d=this;"function"==typeof arguments[2]&&(b=arguments[2],c=arguments[1]),c=c||{},this.id=a,this.adapter=null,this.data={},c.adapter&&this.setAdapter(c.adapter),this.adapter||c.useBest===!1||this.useBestAdapter(),this.adapter&&c.restore!==!1?this.restore(function(){b&&b(d),d=c=null}):b&&(b(d),d=null)},puredom.LocalStorage.prototype.commitDelay=100,puredom.LocalStorage.prototype.data={},puredom.LocalStorage.prototype.setAdapter=function(a){var b,c=this.constructor.adapters,d=(a+"").toLowerCase().replace(/adapt[eo]r$/g,""),e=!1,f=!1;for(b in c)if(c.hasOwnProperty(b)&&(b+"").toLowerCase().replace(/adapt[eo]r$/g,"")===d&&(e=!0,c[b].test(this)===!0)){f=!0,this.adapterName=a,this.adapter=c[b];break}return e?f?!0:(puredom.log('puredom.LocalStorage :: "'+a+'" adapter test() failed: conditions for adapter use not met.'),!1):(puredom.log('puredom.LocalStorage :: Could not find "'+a+'" adapter.'),!1)},puredom.LocalStorage.prototype.getAdapter=function(){return this.adapterName},puredom.LocalStorage.prototype.useBestAdapter=function(){var a,b,c,d=this.constructor.adapters;for(c in d)d.hasOwnProperty(c)&&"none"!==c&&d[c].test(this)===!0&&(!a||(Math.round(a.rating)||0)<(Math.round(d[c].rating)||0))&&(a=d[c],b=c);return a?(this.adapterName=b,this.adapter=a,!0):(setTimeout(function(){throw"puredom.LocalStorage :: Could not find the best adapter."},1),!1)},puredom.LocalStorage.prototype.getNamespace=function(a){var b,c=this;return a+="","."===a.substring(0,1)&&(a=a.substring(1)),"."===a.substring(a.length-1)&&(a=a.substring(0,a.length-1)),b=puredom.extend(new puredom.LocalStorage.NamespacedLocalStorage,{getAdapter:function(){return c.getAdapter()},getNamespace:this.getNamespace,getValue:function(b){return c.getValue(a+"."+b)},setValue:function(b,d){return c.setValue(a+"."+b,d),this},removeKey:function(b){return c.removeKey(a+"."+b),this},purge:function(){return c.removeKey(a),this},getData:function(){return c.getValue(a)},restore:function(a){var b,d=this;return a&&(b=function(){a(d),d=b=a=null}),c.restore(b),this},commit:function(a){var b,d=this;return a&&(b=function(){a(d),d=b=a=null}),c.commit(b),this}}),puredom.extend(b,{get:b.getValue,set:b.setValue,remove:b.removeKey}),b},puredom.LocalStorage.prototype.getData=function(){return this.data},puredom.LocalStorage.prototype.getValue=function(a){var b=puredom.delve(this.data,a);return b},puredom.LocalStorage.prototype.setValue=function(a,b){var c,d=this.data,e=a.split(".");for(c=0;c<e.length-1;c++)d.hasOwnProperty(e[c])||(d[e[c]]={}),d=d[e[c]];return void 0===b||null===b?(d[e[e.length-1]]=null,delete d[e[e.length-1]]):d[e[e.length-1]]=b,this.queueCommit(),this},puredom.LocalStorage.prototype.removeKey=function(a){return this.setValue(a,void 0),this},puredom.LocalStorage.prototype.get=puredom.LocalStorage.prototype.getValue,puredom.LocalStorage.prototype.set=puredom.LocalStorage.prototype.setValue,puredom.LocalStorage.prototype.remove=puredom.LocalStorage.prototype.removeKey,puredom.LocalStorage.prototype.purge=function(){return this.data={},this.queueCommit(),this},puredom.LocalStorage.prototype.restore=function(a){var b,c,d=this;return b=this._adapterCall("load",function(b){d.data=c=b||{},a&&a(d),d=null}),b&&!c&&(this.data=b,a&&a(this)),b=c=null,this},puredom.LocalStorage.prototype.commit=function(a){var b=this;return this._commitTimer&&(clearTimeout(this._commitTimer),this._commitTimer=null),this._adapterCall("save",this.data,function(){a&&a(b),b=null}),this},puredom.LocalStorage.prototype.queueCommit=function(){var a=this;this._commitTimer||(this._commitTimer=setTimeout(function(){a.commit(),a=null},this.commitDelay))},puredom.LocalStorage.prototype._adapterCall=function(a){return this.adapter&&this.adapter[a]?this.adapter[a].apply(this.adapter,[this].concat(puredom.toArray(arguments).slice(1))):void 0},puredom.LocalStorage.NamespacedLocalStorage=function(){},puredom.LocalStorage.adapters={},puredom.LocalStorage.addAdapter=function(a,b){if(!b.save)throw'puredom.LocalStorage :: Adapter "'+a+'" attempted to register, but does not provide a save() method.';if(!b.load)throw'puredom.LocalStorage :: Adapter "'+a+'" attempted to register, but does not provide a load() method.';this.adapters[a]=b},puredom.LocalStorage.adapters.none=function(){},puredom.extend(puredom.LocalStorage.adapters.none.prototype,{defaultName:"db",rating:0,test:function(){return!1},load:function(a,b){b&&b()},save:function(a,b,c){c&&c(!1)}}),puredom.LocalStorage.addAdapter("CookieAdapter",{defaultName:"db",rating:5,test:function(){return puredom.cookies&&puredom.cookies.get&&"cookie"in document?!0:!1},load:function(a,b){var c,d=puredom.cookies.get(a.id||this.defaultName);return d&&(c=puredom.json(d)),b&&b(c),c},save:function(a,b,c){puredom.cookies.set(a.id||this.defaultName,puredom.json(b)),c&&c(!0)}}),puredom.LocalStorage.addAdapter("LocalStorageAdapter",{defaultName:"db",rating:60,test:function(){var a,b="localStorage"in window&&"function"==typeof window.localStorage.hasOwnProperty,c=puredom.json({a:"a",b:4/3,c:!0,d:null});if(b)try{a=localStorage.__test,localStorage.__test=c,localStorage.__test!==c&&(b=!1),localStorage.__test=a,void 0===a&&delete localStorage.__test}catch(d){b=!1}return b},load:function(a,b){var c,d=this._getKey(a);return localStorage.hasOwnProperty(d)&&(c=puredom.json.parse(localStorage[d])),b&&b(c),c},save:function(a,b,c){var d=this._getKey(a);return void 0===b?delete localStorage[d]:localStorage[d]=puredom.json.stringify(b),c&&c(!0),!0},_getKey:function(a){return(a.id||this.defaultName||"")+""}}),puredom.LocalStorage.addAdapter("UserDataAdapter",{defaultName:"db",rating:20,test:function(){return/\bMSIE\s[1-6](\.[0-9]*)?/gim.test(navigator.userAgent+"")?!1:"undefined"!=typeof document.body.addBehavior},load:function(a,b){var c,d,e=this._getKey(a),f=this._getStore(e);return f&&(c=f.getAttribute("puredomlocalstorage")),c&&(d=puredom.json.parse(c)),b&&b(d),d},save:function(a,b,c){var d=this._getKey(a),e=this._getStore(d),f="puredomlocalstorage",g=!1;return e&&"save"in e&&(void 0===b?e.removeAttribute?e.removeAttribute(f):e.setAttribute(f,""):e.setAttribute(f,puredom.json.stringify(b)),e.save(d),g=!0),c&&c(g),g},_getStore:function(a){var b;return this.stores||(this.stores={}),b=this.stores[a],b||(b=this.stores[a]=document.getElementById(a),b||(b=this.stores[a]=document.createElement("span"),b.style.position="absolute",b.style.top="-100px",b.style.left="0",b.style.behavior="url('#default#userData')",document.body.appendChild(b))),"true"!==b.getAttribute("data-tdlsud-loaded")&&(b.setAttribute("data-tdlsud-loaded","true"),b.load(a)),b},_getKey:function(a){return"ieud"+(a.id||this.defaultName||"")}});