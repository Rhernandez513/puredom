<!DOCTYPE html>
<html>
	<head>
		<title>puredom plugins</title>
		<link type="text/css" rel="stylesheet" href="/style.css" />
	</head>
	<body>
		<div class="crumbs"><a href="/">Home</a> &raquo; <a href="/plugins/">Plugins</a></div>
		
		<h1>puredom Plugins</h1>
		
		<div id="plugins">
			<div class="template plugin">
				<h6 data-tpl-id="name"></h6>
				<div class="author">by <a data-tpl-id="ownerUrl" data-tpl-prop="href" target="_blank"><span data-tpl-id="owner"></span></a></div>
				<p data-tpl-id="description|nl2br"></p>
				<div class="updated">Updated: <span data-tpl-id="pushed|dateFormat:%h %d %Y at %l:%M%P"></span></div>
			</div>
		</div>
		
		<div class="footer">This page searches github for projects with "puredom" in the name.  If you want your plugin to show up here, you know what to do!</div>
		
		<script src="/download/latest/puredom.light.js"></script>
		<script>
		(function() {
			var base = puredom('#plugins'),
				tpl = puredom('.plugin.template').hide().declassify('template').remove(),
				repoUrl = 'https://github.com/{owner|escape}/{name|escape}',
				ownerUrl = 'https://github.com/{owner|escape}',
				itemClick = function(e){ window.open(puredom(this).attr('data-url')); };
			puredom.net.jsonp('https://api.github.com/legacy/repos/search/puredom', function(res) {
				var repos = puredom.delve(res, 'data.repositories') || [],
					plugins = base.query('>.plugin'),
					count = 0,
					i;
				puredom.forEach(repos, function(repo, ind) {
					var item;
					if (repo.type==='repo' && !repo['private']) {
						count++;
						item = plugins.index(ind);
						if (!item.exists()) {
							item = tpl.clone(true).insertInto(base).fadeIn('slow');
						}
						repo.ownerUrl = puredom.template(ownerUrl, repo);
						repo.url = repo.url || puredom.template(repoUrl, repo);
						item.template(repo)
							.attr('data-url', repo.url)
							.on('click', itemClick);
						item.query('a').on('click', function(e) {
							e.cancelBubble();
						});
					}
				});
				if (count<plugins.length) {
					plugins.index(repos.length, plugins.length-repos.length).destroy();
				}
			});
		}());
		</script>
	</body>
</html>